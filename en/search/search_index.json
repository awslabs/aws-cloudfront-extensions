{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Amazon CloudFront Extensions Amazon CloudFront Extensions is an extension for using CloudFront. CloudFront Extensions includes rich set of featured Lambda@Edge, CloudFront Functions, CDK templates for various user scenarios and a monitoring API. One stop to find Lambda@Edge and CloudFront Function for different use cases CloudFront Extensions offers production level Lambda@Edge and CloudFront Functions for common CloudFront use cases, such as redirect, authentication verification, pre-warm, resizing image. Lambda@Edge Name Description Example Authentication with Cognito Integrate with Cognito to provide authentication service. - Adding security header Add security headers into response after successful authentication. Add 'strict-transport-security' to force browser using HTTPS. Serving content based on device type Redirect to the different version of an object based on the type of device that the user is using. Redirect to specific url if the request device is mobile Cross origin resource sharing Support CORS(Cross Origin Resource Sharing) by Lambda@Edge. Add headers such as 'access-control-allow-origin', 'access-control-allow-headers' Modify response status code Modify response status code to another status code. Modify status code from 200 to 206 Modify response header Modify response header as per configuration. - Access origin by weight rate Forward request to multiple origin regarding to pre-configured weight for each origin. - Failover to alternative origin Failover to alternative IP from pre-configured list, return from success IP otherwise retry until last one. - Support 302 from origin Process 302 response from origin, then access the redirected URL and return the response. - Pre-warm This Lambda will prewarm static content in specific pop. Prewarm content only in North America Resize picture Resize pictures on the fly according to dimensions passed by the query parameter. Resize a picture from 1000x1000 to 200x300 Anti-hotlinking Protect against hotlinking, users need to specify a referer allow list which supports wild card, the request is rejected if the referer is not in the allow list. Only allow the requests from *.example.com Standardize query string Standardize the query string before CloudFront forwards requests to your origin, so that improve the cache hit ratio. Update https://d111111abcdef8.cloudfront.net/images/image.jpg?Type=demo&Color=red to https://d111111abcdef8.cloudfront.net/images/image.jpg?color=red&type=demo Authentication with Alibaba Cloud This solution provided by Goclouds Data is designed to achieve ALIYUN CDN authentication. - Rewrite host for custom origin Rewrite host for custom origin - Serverless load balancer The serverless load balance solution will load balance for your origin via Lambda@Edge which is deployed on CloudFront origin request. - Custom response with new URL Replace the response content with a new content. Replace the url \"www.original.com\" to \"www.new.com\" in the response. CloudFront Functions Name Description Example Add security headers Add several response headers to enable web browsers security features. Add 'strict-transport-security' to force browser using HTTPS. Cross origin resource sharing Support CORS(Cross Origin Resource Sharing) by CloudFront Function. Add headers such as 'access-control-allow-origin', 'access-control-allow-headers' Add cache control headers Add a Cache-Control header for the browser so that content can be cached locally in the browser. - Add origin headers Add an Origin header if it is not present in the incoming request. The Origin header is part of Cross-Origin resource sharing (CORS), a mechanism using HTTP headers to tell browsers to give a web application running at one origin access to selected resources from a different origin. - Add true client IP headers Add a True-Client-IP header to include the IP address of a client connecting to CloudFront. Without this header, connections from CloudFront to your origin contain the IP address of the CloudFront server making the request to your origin, not the IP address of the client connected to CloudFront. - Redirect based on country Redirect a user to a country-specific version of a site based on the country of the user. - Default dir index Append index.html to the end of URLs that don't include a filename or extension. Update https://d111111abcdef8.cloudfront.net to https://d111111abcdef8.cloudfront.net/index.html Verify JSON web token Validate a JSON Web Token (JWT) in the query string of the incoming request. - Customize request host Replaces host with the value in header awscustomhost. - CloudFront Security Automations with Amazon WAF and Amazon Shield CloudFront Extensions provides a template that allows you to use Amazon WAF and Amazon Shield on CloudFront, it will automatically deploy a set of WAF rules and Shield protection groups into your account to secure your web applications against below attacks SQL Injection and XSS: The solution configures two native WAF rules that are designed to protect against common SQL injection or cross-site scripting (XSS) patterns in the URI, query string, or body of a request. HTTP flood: This component protects against attacks that consist of a large number of requests from a particular IP address, such as a web-layer DDoS attack or a brute-force login attempt. Bad Bots: This component automatically sets up a honeypot, which is a security mechanism intended to lure and deflect an attempted attack. Scanners and Probes: This component parses application access logs searching for suspicious behavior, such as an abnormal amount of errors generated by an origin. It then blocks those suspicious source IP addresses for a customer-defined period of time. IP Reputation Lists: IP Lists Parser Lambda function which checks third-party IP reputation lists hourly for new ranges to block. Deny list and allow list: This component creates two specific WAF rules that allow you to manually insert IP addresses that you want to block or allow. Monitoring API by analyzing CloudFront real-time logs CloudFront Extensions provides a monitoring API, it obtains metrics such as cache hit rate and download rate by analyzing CloudFront real-time logs, and outputs them through Restful API. This solution can meet flexible customization requirements, and customize indicator logic from real-time logs according to your specific requirements, which can be implemented only through convenient SQL statements in Athena. The following 10 reference metrics are provided in this example: request: the number of requests from the client to CloudFront requestOrigin: the number of requests back to the origin statusCode: the status code from the client to CloudFront statusCodeOrigin: the status code of the back-to-origin bandwidth: the bandwidth from the client to CloudFront bandwidthOrigin: bandwidth back to origin chr (cache hit rate): cache hit rate calculated by the number of requests chrBandWith: cache hit ratio calculated by bandwidth downloadSpeed: download speed from client to CloudFront downloadSpeedOrigin: The download speed of the back-to-origin The above reference indicators effectively supplement the current CloudWatch monitoring indicators for CloudFront, which can help you understand the operation of CloudFront from multiple dimensions. For the default built-in monitoring metrics of CloudFront, you can refer to Monitoring CloudFront with Amazon CloudWatch .","title":"Welcome"},{"location":"#amazon-cloudfront-extensions","text":"Amazon CloudFront Extensions is an extension for using CloudFront. CloudFront Extensions includes rich set of featured Lambda@Edge, CloudFront Functions, CDK templates for various user scenarios and a monitoring API.","title":"Amazon CloudFront Extensions"},{"location":"#one-stop-to-find-lambdaedge-and-cloudfront-function-for-different-use-cases","text":"CloudFront Extensions offers production level Lambda@Edge and CloudFront Functions for common CloudFront use cases, such as redirect, authentication verification, pre-warm, resizing image.","title":"One stop to find Lambda@Edge and CloudFront Function for different use cases"},{"location":"#lambdaedge","text":"Name Description Example Authentication with Cognito Integrate with Cognito to provide authentication service. - Adding security header Add security headers into response after successful authentication. Add 'strict-transport-security' to force browser using HTTPS. Serving content based on device type Redirect to the different version of an object based on the type of device that the user is using. Redirect to specific url if the request device is mobile Cross origin resource sharing Support CORS(Cross Origin Resource Sharing) by Lambda@Edge. Add headers such as 'access-control-allow-origin', 'access-control-allow-headers' Modify response status code Modify response status code to another status code. Modify status code from 200 to 206 Modify response header Modify response header as per configuration. - Access origin by weight rate Forward request to multiple origin regarding to pre-configured weight for each origin. - Failover to alternative origin Failover to alternative IP from pre-configured list, return from success IP otherwise retry until last one. - Support 302 from origin Process 302 response from origin, then access the redirected URL and return the response. - Pre-warm This Lambda will prewarm static content in specific pop. Prewarm content only in North America Resize picture Resize pictures on the fly according to dimensions passed by the query parameter. Resize a picture from 1000x1000 to 200x300 Anti-hotlinking Protect against hotlinking, users need to specify a referer allow list which supports wild card, the request is rejected if the referer is not in the allow list. Only allow the requests from *.example.com Standardize query string Standardize the query string before CloudFront forwards requests to your origin, so that improve the cache hit ratio. Update https://d111111abcdef8.cloudfront.net/images/image.jpg?Type=demo&Color=red to https://d111111abcdef8.cloudfront.net/images/image.jpg?color=red&type=demo Authentication with Alibaba Cloud This solution provided by Goclouds Data is designed to achieve ALIYUN CDN authentication. - Rewrite host for custom origin Rewrite host for custom origin - Serverless load balancer The serverless load balance solution will load balance for your origin via Lambda@Edge which is deployed on CloudFront origin request. - Custom response with new URL Replace the response content with a new content. Replace the url \"www.original.com\" to \"www.new.com\" in the response.","title":"Lambda@Edge"},{"location":"#cloudfront-functions","text":"Name Description Example Add security headers Add several response headers to enable web browsers security features. Add 'strict-transport-security' to force browser using HTTPS. Cross origin resource sharing Support CORS(Cross Origin Resource Sharing) by CloudFront Function. Add headers such as 'access-control-allow-origin', 'access-control-allow-headers' Add cache control headers Add a Cache-Control header for the browser so that content can be cached locally in the browser. - Add origin headers Add an Origin header if it is not present in the incoming request. The Origin header is part of Cross-Origin resource sharing (CORS), a mechanism using HTTP headers to tell browsers to give a web application running at one origin access to selected resources from a different origin. - Add true client IP headers Add a True-Client-IP header to include the IP address of a client connecting to CloudFront. Without this header, connections from CloudFront to your origin contain the IP address of the CloudFront server making the request to your origin, not the IP address of the client connected to CloudFront. - Redirect based on country Redirect a user to a country-specific version of a site based on the country of the user. - Default dir index Append index.html to the end of URLs that don't include a filename or extension. Update https://d111111abcdef8.cloudfront.net to https://d111111abcdef8.cloudfront.net/index.html Verify JSON web token Validate a JSON Web Token (JWT) in the query string of the incoming request. - Customize request host Replaces host with the value in header awscustomhost. -","title":"CloudFront Functions"},{"location":"#cloudfront-security-automations-with-amazon-waf-and-amazon-shield","text":"CloudFront Extensions provides a template that allows you to use Amazon WAF and Amazon Shield on CloudFront, it will automatically deploy a set of WAF rules and Shield protection groups into your account to secure your web applications against below attacks SQL Injection and XSS: The solution configures two native WAF rules that are designed to protect against common SQL injection or cross-site scripting (XSS) patterns in the URI, query string, or body of a request. HTTP flood: This component protects against attacks that consist of a large number of requests from a particular IP address, such as a web-layer DDoS attack or a brute-force login attempt. Bad Bots: This component automatically sets up a honeypot, which is a security mechanism intended to lure and deflect an attempted attack. Scanners and Probes: This component parses application access logs searching for suspicious behavior, such as an abnormal amount of errors generated by an origin. It then blocks those suspicious source IP addresses for a customer-defined period of time. IP Reputation Lists: IP Lists Parser Lambda function which checks third-party IP reputation lists hourly for new ranges to block. Deny list and allow list: This component creates two specific WAF rules that allow you to manually insert IP addresses that you want to block or allow.","title":"CloudFront Security Automations with Amazon WAF and Amazon Shield"},{"location":"#monitoring-api-by-analyzing-cloudfront-real-time-logs","text":"CloudFront Extensions provides a monitoring API, it obtains metrics such as cache hit rate and download rate by analyzing CloudFront real-time logs, and outputs them through Restful API. This solution can meet flexible customization requirements, and customize indicator logic from real-time logs according to your specific requirements, which can be implemented only through convenient SQL statements in Athena. The following 10 reference metrics are provided in this example: request: the number of requests from the client to CloudFront requestOrigin: the number of requests back to the origin statusCode: the status code from the client to CloudFront statusCodeOrigin: the status code of the back-to-origin bandwidth: the bandwidth from the client to CloudFront bandwidthOrigin: bandwidth back to origin chr (cache hit rate): cache hit rate calculated by the number of requests chrBandWith: cache hit ratio calculated by bandwidth downloadSpeed: download speed from client to CloudFront downloadSpeedOrigin: The download speed of the back-to-origin The above reference indicators effectively supplement the current CloudWatch monitoring indicators for CloudFront, which can help you understand the operation of CloudFront from multiple dimensions. For the default built-in monitoring metrics of CloudFront, you can refer to Monitoring CloudFront with Amazon CloudWatch .","title":"Monitoring API by analyzing CloudFront real-time logs"},{"location":"additional-resources/","text":"Amazon API Gateway Amazon Athena Amazon CloudFront Amazon CloudFront Functions Amazon CloudFormation Amazon Cognito Amazon DynamoDB Amazon Glue Amazon Kinesis Amazon Kinesis Data Firehose Amazon Lambda Amazon Lambda@Edge Amazon Shield Amazon Simple Storage Service (Amazon S3) Amazon WAF","title":"Additional resources"},{"location":"architecture/","text":"Amazon CloudFront Extensions contains 3 components: Lambda@Edge & CloudFront Functions collection, CloudFront Security Automations with Amazon WAF and Amazon Shield, monitoring solution. Figure 1: CloudFront Extensions architecture Lambda@Edge & CloudFront Functions collection It contains mutiple Lambda@Edge which can be deployed via SAR(Serverless Application Repository) and CloudFront Functions which can be deployed by CloudFormation CloudFront security automations with Amazon WAF and Amazon Shield Deploying this solution with the default parameters builds the following environment in the Amazon Web Service Cloud. Figure 2: CloudFront Security Automations with Amazon WAF and Amazon Shield architecture The CloudFormation template provides the following components and workflows: - Shield Deployment Lambda function will automatically deploy a protection group and protected resource to protect against DDoS attack. Log Parser Lambda function also invokes Athena to query CloudFront access log and WAF log to find the request whose times is above the threshold, add the IP into WAF to protect against DDoS attack. - When the crawler triggers the trap URL, Badbot Parser Lambda function will add the IP into WAF to stop the crawler crawling the web site content. - CloudWatch will invoke IP List Parser Lambda function at a fixed interval to update the malicious IP list from the third party website. - The automated deployed WAF rules will protect against SQL injection attack and XSS attack. Monitoring solution Deploying this solution with the default parameters builds the following environment in the Amazon Web Service Cloud. Figure 3: Monitoring Solution architecture This solution deploys the Amazon CloudFormation template in your Amazon Web Service Cloud account and completes the following settings. First, users need to enable CloudFront real-time logs During the opening process, you need to configure the corresponding Kinesis data stream. Set up Kinesis Data Firehose to complete data transfer quickly This enables CloudFront's real-time logs to pass through Kinesis Data Stream and finally store them in S3 buckets through Kinesis Data Firehose. During this process, to monitor the download speed in each country and each ISP, Kinesis Data Firehose invokes the Amazon Lambda function Log Transformer to find the ISP and country code through the client IP, and cooperate with Kinesis Data Firehose to realize dynamic partitioning, that is, real-time logs are partitioned by partition key and stored in S3 bucket, such as year=2021/month=12/day=10. Query real-time logs in S3 via Athena In order to allow Athena to speed up data query through data partitioning, Amazon EventBridge will create all partitions for the next day every day, and delete the partitions of the previous day. The Lambda function MetricCollector is used to analyze real-time logs and collect monitoring metrics. It will be executed every 5 minutes. Save the results of query data in DynamoDB for subsequent retrieval Query the corresponding monitoring indicator data through Athena, such as calculating CHR (cache hit rate) and download rate through bandwidth, and finally store the monitoring indicator data in the DynamoDB table. The end user interface uses API Gateway The user interface generates a Restful API through API Gateway and the Lambda function MetricManager. MetricManager reads the monitoring indicators in the DynamoDB table and returns the corresponding results. In order to further strengthen security management and restrict API access, Cognito authorization is enabled in API Gateway, and users who access the API need to carry a Cognito token to request the API normally.","title":"Architecture overview"},{"location":"architecture/#lambdaedge-cloudfront-functions-collection","text":"It contains mutiple Lambda@Edge which can be deployed via SAR(Serverless Application Repository) and CloudFront Functions which can be deployed by CloudFormation","title":"Lambda@Edge &amp; CloudFront Functions collection"},{"location":"architecture/#cloudfront-security-automations-with-amazon-waf-and-amazon-shield","text":"Deploying this solution with the default parameters builds the following environment in the Amazon Web Service Cloud. Figure 2: CloudFront Security Automations with Amazon WAF and Amazon Shield architecture The CloudFormation template provides the following components and workflows: - Shield Deployment Lambda function will automatically deploy a protection group and protected resource to protect against DDoS attack. Log Parser Lambda function also invokes Athena to query CloudFront access log and WAF log to find the request whose times is above the threshold, add the IP into WAF to protect against DDoS attack. - When the crawler triggers the trap URL, Badbot Parser Lambda function will add the IP into WAF to stop the crawler crawling the web site content. - CloudWatch will invoke IP List Parser Lambda function at a fixed interval to update the malicious IP list from the third party website. - The automated deployed WAF rules will protect against SQL injection attack and XSS attack.","title":"CloudFront security automations with Amazon WAF and Amazon Shield"},{"location":"architecture/#monitoring-solution","text":"Deploying this solution with the default parameters builds the following environment in the Amazon Web Service Cloud. Figure 3: Monitoring Solution architecture This solution deploys the Amazon CloudFormation template in your Amazon Web Service Cloud account and completes the following settings. First, users need to enable CloudFront real-time logs During the opening process, you need to configure the corresponding Kinesis data stream. Set up Kinesis Data Firehose to complete data transfer quickly This enables CloudFront's real-time logs to pass through Kinesis Data Stream and finally store them in S3 buckets through Kinesis Data Firehose. During this process, to monitor the download speed in each country and each ISP, Kinesis Data Firehose invokes the Amazon Lambda function Log Transformer to find the ISP and country code through the client IP, and cooperate with Kinesis Data Firehose to realize dynamic partitioning, that is, real-time logs are partitioned by partition key and stored in S3 bucket, such as year=2021/month=12/day=10. Query real-time logs in S3 via Athena In order to allow Athena to speed up data query through data partitioning, Amazon EventBridge will create all partitions for the next day every day, and delete the partitions of the previous day. The Lambda function MetricCollector is used to analyze real-time logs and collect monitoring metrics. It will be executed every 5 minutes. Save the results of query data in DynamoDB for subsequent retrieval Query the corresponding monitoring indicator data through Athena, such as calculating CHR (cache hit rate) and download rate through bandwidth, and finally store the monitoring indicator data in the DynamoDB table. The end user interface uses API Gateway The user interface generates a Restful API through API Gateway and the Lambda function MetricManager. MetricManager reads the monitoring indicators in the DynamoDB table and returns the corresponding results. In order to further strengthen security management and restrict API access, Cognito authorization is enabled in API Gateway, and users who access the API need to carry a Cognito token to request the API normally.","title":"Monitoring solution"},{"location":"cost/","text":"Lambda@Edge & CloudFront Functions Collection It contains a collection of Lambda@Edge and CloudFront Functions. Service Cost Lambda@Edge Pricing CloudFront Functions Pricing CloudFront Security Automations with Amazon WAF and Amazon Shield You are responsible for the cost of AWS services used when running this solution. As of [February] 2022, the estimated cost is $22.84 per month in the US East (N. Virginia) Region (excludes free tier). We recommend creating a budget through AWS Cost Explorer to help manage costs. For full details, refer to the pricing webpage for each AWS service used in this solution. Service Dimensions Cost/Month Amazon Kinesis Data Firehose 100 GB $2.9 AWS Lambda 1M invocations average 500 millisecond and 512 MB memory $4.37 Amazon API Gateway 1M requests ~$3.5 Amazon Athena 1M queries 2GB data scanned per query $9.77 Amazon Simple Storage Service (S3) 100 GB $2.3 Total $22.84 Monitoring Solution You are responsible for the cost of AWS services used when running this solution. As of [February] 2022, the estimated cost is $112.89 per month in the US East (N. Virginia) Region (excludes free tier). We recommend creating a budget through AWS Cost Explorer to help manage costs. For full details, refer to the pricing webpage for each AWS service used in this solution. Service Dimensions Cost/Month Amazon Kinesis Data Firehose 100 records(2KB)/second Dynamic Partitioning enabled $61.5 Amazon Kinesis Data Stream 1 shard 100 records(2KB)/second 168 hours data retention $29.23 AWS Lambda 1M invocations average 500 millisecond and 512 MB memory $4.37 Amazon API Gateway 1M requests $3.5 Amazon Athena 1M queries 2GB data scanned per query $9.77 Amazon Simple Storage Service (S3) 100 GB $2.30 Amazon Cognito 30 MAU $1.5 Amazon DynamoDB 1GB data storage 2 writes per minute 1 read every 2 minutes $0.72 Total $112.89","title":"Cost"},{"location":"cost/#lambdaedge-cloudfront-functions-collection","text":"It contains a collection of Lambda@Edge and CloudFront Functions. Service Cost Lambda@Edge Pricing CloudFront Functions Pricing","title":"Lambda@Edge &amp; CloudFront Functions Collection"},{"location":"cost/#cloudfront-security-automations-with-amazon-waf-and-amazon-shield","text":"You are responsible for the cost of AWS services used when running this solution. As of [February] 2022, the estimated cost is $22.84 per month in the US East (N. Virginia) Region (excludes free tier). We recommend creating a budget through AWS Cost Explorer to help manage costs. For full details, refer to the pricing webpage for each AWS service used in this solution. Service Dimensions Cost/Month Amazon Kinesis Data Firehose 100 GB $2.9 AWS Lambda 1M invocations average 500 millisecond and 512 MB memory $4.37 Amazon API Gateway 1M requests ~$3.5 Amazon Athena 1M queries 2GB data scanned per query $9.77 Amazon Simple Storage Service (S3) 100 GB $2.3 Total $22.84","title":"CloudFront Security Automations with Amazon WAF and Amazon Shield"},{"location":"cost/#monitoring-solution","text":"You are responsible for the cost of AWS services used when running this solution. As of [February] 2022, the estimated cost is $112.89 per month in the US East (N. Virginia) Region (excludes free tier). We recommend creating a budget through AWS Cost Explorer to help manage costs. For full details, refer to the pricing webpage for each AWS service used in this solution. Service Dimensions Cost/Month Amazon Kinesis Data Firehose 100 records(2KB)/second Dynamic Partitioning enabled $61.5 Amazon Kinesis Data Stream 1 shard 100 records(2KB)/second 168 hours data retention $29.23 AWS Lambda 1M invocations average 500 millisecond and 512 MB memory $4.37 Amazon API Gateway 1M requests $3.5 Amazon Athena 1M queries 2GB data scanned per query $9.77 Amazon Simple Storage Service (S3) 100 GB $2.30 Amazon Cognito 30 MAU $1.5 Amazon DynamoDB 1GB data storage 2 writes per minute 1 read every 2 minutes $0.72 Total $112.89","title":"Monitoring Solution"},{"location":"deployment/","text":"Before you launch the solution, review the architecture, supported regions, and other considerations discussed in this guide. Follow the step-by-step instructions in this section to configure and deploy the solution into your account. Lambda@Edge & CloudFront Functions collection Time to deploy : Approximately [3] minutes Deployment overview Click below deploy button to deploy this solution in your AWS account. As for Lambda@Edge functions, you can also find and configure them by searching aws-cloudfront-extensions in the Amazon SAR(Serverless Application Repository) Lambda@Edge Name Deploy Authentication by Cognito Adding security header Serving content based on device type Cross origin resource sharing Modify response status code Modify response header Access origin by weight rate Failover to alternative origin Support 302 from origin Pre-warm Resize picture Anti-hotlinking Standardize query string Authentication with Alibaba Cloud Rewrite host for custom origin Serverless load balancer Custom response with new URL CloudFront Functions Name Deploy Add security headers Cross origin resource sharing Add cache control headers Add origin headers Add true client IP headers Redirect based on country Default dir index Verify JSON web token Customize request host Lambda@Edge Deployment in SAR Open the Amazon Serverless Application Repository page in the Console Check Show apps that create custom IAM roles or resource policies Search aws-cloudfront-extensions , all the extensions will be shown, choose an application (eg. serving-based-on-device) and click Deploy . On the application detail page, check I acknowledge that this app creates custom IAM roles Choose Deploy . After the deployment is completed, it will redirect to Lambda application page, and you can deploy it to Lambda@Edge. CloudFront security automations with Amazon WAF and Amazon Shield Time to deploy : Approximately [15] minutes Deployment overview Use the following steps to deploy this solution on Amazon Web Service. Launch the CloudFormation template into your Amazon Web Service account. Review the template parameters, and adjust them if necessary. Deployment steps The template launches in the US East (N. Virginia) Region by default. You can deploy the solution with existing CloudFormation templates. You can also download the template as a starting point for your own implementation. The template launches in the US East (N. Virginia) Region by default. To launch the solution in a different AWS Region, use the Region selector in the console navigation bar. Under Parameters, review the parameters for the template, and modify them as necessary. Parameter Default value Details WAFBlockPeriod 240 The period (in minutes) to block applicable IP addresses WAFScope CLOUDFRONT Specifies whether this is for an AWS CloudFront distribution appAccessLogBucket access-log-bucket-cloudfront The name for the Amazon S3 bucket where you want to store Cloud Front access logs for your CloudFront distribution errorThreshold 50 The maximum acceptable bad requests per minute per IP requestThreshold 100 The maximum acceptable requests per FIVE-minute period per IP address wafLogBucketName waf-log-bucket-cloudfront The name for the Amazon S3 bucket where you want to store WAF access logs !!! note Note For CLOUDFRONT, you must create your WAFv2 resources in the US East (N. Virginia) Region, us-east-1. Choose Next . On the Configure stack options page, you can specify tags (key-value pairs) for resources in your stack and set additional options, and then choose Next . On the Review page, review and confirm the settings. Check the boxes acknowledging that the template will create AWS Identity and Access Management (IAM) resources and any additional capabilities required. Choose Create to deploy the stack. You can view the status of the stack in the AWS CloudFormation Console in the Status column. You should receive a CREATE_COMPLETE status in approximately 15 minutes. To see details for the stack resources, choose the Outputs tab. Monitoring solution Time to deploy : Approximately [15] minutes Deployment overview Use the following steps to deploy this solution on Amazon Web Service. Launch the CloudFormation template into your Amazon Web Service account. Review the template parameters, and adjust them if necessary. Deployment steps The template launches in the US East (N. Virginia) Region by default. You can deploy the solution with existing CloudFormation templates. You can also download the template as a starting point for your own implementation. The template launches in the US East (N. Virginia) Region by default. To launch the solution in a different AWS Region, use the Region selector in the console navigation bar. Under Parameters, review the parameters for the template, and modify them as necessary. Parameter Default value Details CloudFrontDomainList - The CloudFront domain name list, use comma as seperation for multiple domain names CloudFrontLogKeepDays 120 The number of days to keep CloudFront realtime logs in the S3 bucket deployStage prod API Gateway deployment stage Choose Next . On the Configure stack options page, you can specify tags (key-value pairs) for resources in your stack and set additional options, and then choose Next . On the Review page, review and confirm the settings. Check the boxes acknowledging that the template will create AWS Identity and Access Management (IAM) resources and any additional capabilities required. Choose Create to deploy the stack. You can view the status of the stack in the AWS CloudFormation Console in the Status column. You should receive a CREATE_COMPLETE status in approximately 15 minutes. To see details for the stack resources, choose the Outputs tab.","title":"Automated deployment"},{"location":"deployment/#lambdaedge-cloudfront-functions-collection","text":"Time to deploy : Approximately [3] minutes","title":"Lambda@Edge &amp; CloudFront Functions collection"},{"location":"deployment/#deployment-overview","text":"Click below deploy button to deploy this solution in your AWS account. As for Lambda@Edge functions, you can also find and configure them by searching aws-cloudfront-extensions in the Amazon SAR(Serverless Application Repository)","title":"Deployment overview"},{"location":"deployment/#lambdaedge","text":"Name Deploy Authentication by Cognito Adding security header Serving content based on device type Cross origin resource sharing Modify response status code Modify response header Access origin by weight rate Failover to alternative origin Support 302 from origin Pre-warm Resize picture Anti-hotlinking Standardize query string Authentication with Alibaba Cloud Rewrite host for custom origin Serverless load balancer Custom response with new URL","title":"Lambda@Edge"},{"location":"deployment/#cloudfront-functions","text":"Name Deploy Add security headers Cross origin resource sharing Add cache control headers Add origin headers Add true client IP headers Redirect based on country Default dir index Verify JSON web token Customize request host","title":"CloudFront Functions"},{"location":"deployment/#lambdaedge-deployment-in-sar","text":"Open the Amazon Serverless Application Repository page in the Console Check Show apps that create custom IAM roles or resource policies Search aws-cloudfront-extensions , all the extensions will be shown, choose an application (eg. serving-based-on-device) and click Deploy . On the application detail page, check I acknowledge that this app creates custom IAM roles Choose Deploy . After the deployment is completed, it will redirect to Lambda application page, and you can deploy it to Lambda@Edge.","title":"Lambda@Edge Deployment in SAR"},{"location":"deployment/#cloudfront-security-automations-with-amazon-waf-and-amazon-shield","text":"Time to deploy : Approximately [15] minutes","title":"CloudFront security automations with Amazon WAF and Amazon Shield"},{"location":"deployment/#deployment-overview_1","text":"Use the following steps to deploy this solution on Amazon Web Service. Launch the CloudFormation template into your Amazon Web Service account. Review the template parameters, and adjust them if necessary.","title":"Deployment overview"},{"location":"deployment/#deployment-steps","text":"The template launches in the US East (N. Virginia) Region by default. You can deploy the solution with existing CloudFormation templates. You can also download the template as a starting point for your own implementation. The template launches in the US East (N. Virginia) Region by default. To launch the solution in a different AWS Region, use the Region selector in the console navigation bar. Under Parameters, review the parameters for the template, and modify them as necessary. Parameter Default value Details WAFBlockPeriod 240 The period (in minutes) to block applicable IP addresses WAFScope CLOUDFRONT Specifies whether this is for an AWS CloudFront distribution appAccessLogBucket access-log-bucket-cloudfront The name for the Amazon S3 bucket where you want to store Cloud Front access logs for your CloudFront distribution errorThreshold 50 The maximum acceptable bad requests per minute per IP requestThreshold 100 The maximum acceptable requests per FIVE-minute period per IP address wafLogBucketName waf-log-bucket-cloudfront The name for the Amazon S3 bucket where you want to store WAF access logs !!! note Note For CLOUDFRONT, you must create your WAFv2 resources in the US East (N. Virginia) Region, us-east-1. Choose Next . On the Configure stack options page, you can specify tags (key-value pairs) for resources in your stack and set additional options, and then choose Next . On the Review page, review and confirm the settings. Check the boxes acknowledging that the template will create AWS Identity and Access Management (IAM) resources and any additional capabilities required. Choose Create to deploy the stack. You can view the status of the stack in the AWS CloudFormation Console in the Status column. You should receive a CREATE_COMPLETE status in approximately 15 minutes. To see details for the stack resources, choose the Outputs tab.","title":"Deployment steps"},{"location":"deployment/#monitoring-solution","text":"Time to deploy : Approximately [15] minutes","title":"Monitoring solution"},{"location":"deployment/#deployment-overview_2","text":"Use the following steps to deploy this solution on Amazon Web Service. Launch the CloudFormation template into your Amazon Web Service account. Review the template parameters, and adjust them if necessary.","title":"Deployment overview"},{"location":"deployment/#deployment-steps_1","text":"The template launches in the US East (N. Virginia) Region by default. You can deploy the solution with existing CloudFormation templates. You can also download the template as a starting point for your own implementation. The template launches in the US East (N. Virginia) Region by default. To launch the solution in a different AWS Region, use the Region selector in the console navigation bar. Under Parameters, review the parameters for the template, and modify them as necessary. Parameter Default value Details CloudFrontDomainList - The CloudFront domain name list, use comma as seperation for multiple domain names CloudFrontLogKeepDays 120 The number of days to keep CloudFront realtime logs in the S3 bucket deployStage prod API Gateway deployment stage Choose Next . On the Configure stack options page, you can specify tags (key-value pairs) for resources in your stack and set additional options, and then choose Next . On the Review page, review and confirm the settings. Check the boxes acknowledging that the template will create AWS Identity and Access Management (IAM) resources and any additional capabilities required. Choose Create to deploy the stack. You can view the status of the stack in the AWS CloudFormation Console in the Status column. You should receive a CREATE_COMPLETE status in approximately 15 minutes. To see details for the stack resources, choose the Outputs tab.","title":"Deployment steps"},{"location":"notices/","text":"Customers are responsible for making their own independent assessment of the information in this document. This document: (a) is for informational purposes only, (b) represents Amazon Web Services current product offerings and practices, which are subject to change without notice, and (c) does not create any commitments or assurances from Amazon Web Services and its affiliates, suppliers or licensors. Amazon Web Services products or services are provided \u201cas is\u201d without warranties, representations, or conditions of any kind, whether express or implied. Amazon Web Services responsibilities and liabilities to its customers are controlled by Amazon Web Services agreements, and this document is not part of, nor does it modify, any agreement between Amazon Web Services and its customers. The AI Video Super Resolution solution is licensed under the terms of the Apache License Version 2.0 available at The Apache Software Foundation .","title":"Notices"},{"location":"regions/","text":"As of February 2022, this solution is supported in the following Amazon Web Services Regions: us-east-1 (Virginia) us-east-2 (Ohio) us-west-2 (Oregon) ca-central-1 (Canada) sa-east-1 (Sao Paulo) eu-west-1 (Ireland) eu-west-2 (London) eu-west-3 (Paris) eu-central-1 (Frankfurt) ap-northeast-1 (Tokyo) ap-northeast-2 (Seoul) ap-southeast-1 (Singapore) ap-southeast-2 (Sydney) ap-south-1 (Mumbai) ap-east-1 (Hong Kong)","title":"Supported regions"},{"location":"revisions/","text":"Date Change March 2021 Intitial release v1.0.0 July 2021 Release v1.1.0: added 12 Lambda@Edge functions and 9 CloudFront Functions, added CloudFront security automation with Amazon WAF and Shield Advanced December 2021 Release v1.2.0: added 10 Lambda@Edge functions and 2 CloudFront Functions February 2022 Release v1.3.0: added a monitoring API which provides performance metrics","title":"Revisions"},{"location":"security/","text":"When you build systems on Amazon Web Service infrastructure, security responsibilities are shared between you and Amazon Web Service. This shared model reduces your operational burden because Amazon Web Service operates, manages, and controls the components including the host operating system, the virtualization layer, and the physical security of the facilities in which the services operate. For more information about Amazon Web Service security, visit Amazon Web Service Cloud Security . IAM roles Amazon Identity and Access Management (IAM) roles allow customers to assign granular access policies and permissions to services and users on the Amazon Web Service Cloud. This solution creates IAM roles that grant the solution\u2019s access between the solution components.","title":"Security"},{"location":"security/#iam-roles","text":"Amazon Identity and Access Management (IAM) roles allow customers to assign granular access policies and permissions to services and users on the Amazon Web Service Cloud. This solution creates IAM roles that grant the solution\u2019s access between the solution components.","title":"IAM roles"},{"location":"source/","text":"Visit our GitHub repository to download the templates and scripts for this solution. The CloudFront Extensions template is generated using the Amazon Cloud Development Kit (CDK) . Refer to the README.md file for additional information.","title":"Source code"},{"location":"template/","text":"To automate deployment, this solution uses the following Amazon CloudFormation templates, which you can download before deployment: CloudFront security automations with Amazon WAF and Amazon Shield AwsCloudfrontWafStack.template : Use this template to launch the solution and all associated components. The default configuration deploys Amazon API Gateway, Amazon Lambda, Amazon S3, Amazon Athena, Amazon CloudWatch, Amazon WAF and Amazon Shield Advanced, but you can customize the template to meet your specific needs. Monitoring solution CloudFrontMonitoringStack.template : Use this template to launch the solution and all associated components. The default configuration deploys Amazon API Gateway, Amazon Lambda, Amazon S3, Amazon Athena, Amazon Cognito and Amazon DynamoDB, but you can customize the template to meet your specific needs.","title":"CloudFormation template"},{"location":"template/#cloudfront-security-automations-with-amazon-waf-and-amazon-shield","text":"AwsCloudfrontWafStack.template : Use this template to launch the solution and all associated components. The default configuration deploys Amazon API Gateway, Amazon Lambda, Amazon S3, Amazon Athena, Amazon CloudWatch, Amazon WAF and Amazon Shield Advanced, but you can customize the template to meet your specific needs.","title":"CloudFront security automations with Amazon WAF and Amazon Shield"},{"location":"template/#monitoring-solution","text":"CloudFrontMonitoringStack.template : Use this template to launch the solution and all associated components. The default configuration deploys Amazon API Gateway, Amazon Lambda, Amazon S3, Amazon Athena, Amazon Cognito and Amazon DynamoDB, but you can customize the template to meet your specific needs.","title":"Monitoring solution"},{"location":"uninstall/","text":"To uninstall the CloudFront Extensions solution, you must delete the Amazon CloudFormation stack. You can use either the Amazon Management Console or the Amazon Command Line Interface (Amazon CLI) to delete the CloudFormation stack. Uninstall the stack using the Amazon Management Console Sign in to the Amazon CloudFormation console. Select this solution\u2019s installation parent stack. Choose Delete . Uninstall the stack using Amazon Command Line Interface Determine whether the Amazon Command Line Interface (Amazon CLI) is available in your environment. For installation instructions, refer to What Is the Amazon Command Line Interface in the Amazon CLI User Guide . After confirming that the Amazon CLI is available, run the following command. aws cloudformation delete-stack --stack-name <installation-stack-name> --region <aws-region>","title":"Uninstall the solution"},{"location":"uninstall/#uninstall-the-stack-using-the-amazon-management-console","text":"Sign in to the Amazon CloudFormation console. Select this solution\u2019s installation parent stack. Choose Delete .","title":"Uninstall the stack using the Amazon Management Console"},{"location":"uninstall/#uninstall-the-stack-using-amazon-command-line-interface","text":"Determine whether the Amazon Command Line Interface (Amazon CLI) is available in your environment. For installation instructions, refer to What Is the Amazon Command Line Interface in the Amazon CLI User Guide . After confirming that the Amazon CLI is available, run the following command. aws cloudformation delete-stack --stack-name <installation-stack-name> --region <aws-region>","title":"Uninstall the stack using Amazon Command Line Interface"}]}