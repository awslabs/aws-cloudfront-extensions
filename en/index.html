
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://www.amazonaws.cn/solutions/amazon-cloudfront-extensions/">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>Amazon CloudFront Extensions Implementation Guide</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL(".",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#amazon-cloudfront-extensions" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Amazon CloudFront Extensions Implementation Guide" class="md-header__button md-logo" aria-label="Amazon CloudFront Extensions Implementation Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Amazon CloudFront Extensions Implementation Guide
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Welcome
            
          </span>
        </div>
      </div>
    </div>
    
    
      <div class="md-header__option">
        <div class="md-select">
          
          <button class="md-header__button md-icon" aria-label="Select language">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24z"/></svg>
          </button>
          <div class="md-select__inner">
            <ul class="md-select__list">
              
                <li class="md-select__item">
                  <a href="/aws-cloudfront-extensions/en/" hreflang="en" class="md-select__link">
                    English
                  </a>
                </li>
                
                <li class="md-select__item">
                  <a href="/aws-cloudfront-extensions/zh/" hreflang="zh" class="md-select__link">
                    中文
                  </a>
                </li>
                
            </ul>
          </div>
        </div>
      </div>
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/awslabs/aws-cloudfront-extensions/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Amazon CloudFront Extensions Implementation Guide" class="md-nav__button md-logo" aria-label="Amazon CloudFront Extensions Implementation Guide" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Amazon CloudFront Extensions Implementation Guide
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/awslabs/aws-cloudfront-extensions/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Welcome
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="." class="md-nav__link md-nav__link--active">
        Welcome
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#one-stop-to-find-lambdaedge-and-cloudfront-function-for-different-use-cases" class="md-nav__link">
    One stop to find Lambda@Edge and CloudFront Function for different use cases
  </a>
  
    <nav class="md-nav" aria-label="One stop to find Lambda@Edge and CloudFront Function for different use cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lambdaedge" class="md-nav__link">
    Lambda@Edge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloudfront-functions" class="md-nav__link">
    CloudFront Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloudfront-security-automations-with-amazon-waf-and-amazon-shield" class="md-nav__link">
    CloudFront Security Automations with Amazon WAF and Amazon Shield
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-api-by-analyzing-cloudfront-real-time-logs" class="md-nav__link">
    Monitoring API by analyzing CloudFront real-time logs
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="cost/" class="md-nav__link">
        Cost
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="architecture/" class="md-nav__link">
        Architecture overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="security/" class="md-nav__link">
        Security
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="regions/" class="md-nav__link">
        Supported regions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="template/" class="md-nav__link">
        CloudFormation template
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="deployment/" class="md-nav__link">
        Automated deployment
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="additional-resources/" class="md-nav__link">
        Additional resources
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="uninstall/" class="md-nav__link">
        Uninstall the solution
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="source/" class="md-nav__link">
        Source code
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="revisions/" class="md-nav__link">
        Revisions
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="notices/" class="md-nav__link">
        Notices
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#one-stop-to-find-lambdaedge-and-cloudfront-function-for-different-use-cases" class="md-nav__link">
    One stop to find Lambda@Edge and CloudFront Function for different use cases
  </a>
  
    <nav class="md-nav" aria-label="One stop to find Lambda@Edge and CloudFront Function for different use cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#lambdaedge" class="md-nav__link">
    Lambda@Edge
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#cloudfront-functions" class="md-nav__link">
    CloudFront Functions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cloudfront-security-automations-with-amazon-waf-and-amazon-shield" class="md-nav__link">
    CloudFront Security Automations with Amazon WAF and Amazon Shield
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#monitoring-api-by-analyzing-cloudfront-real-time-logs" class="md-nav__link">
    Monitoring API by analyzing CloudFront real-time logs
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/awslabs/aws-cloudfront-extensions/edit/master/docs/index.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="amazon-cloudfront-extensions">Amazon CloudFront Extensions</h1>
<p>Amazon CloudFront Extensions is an extension for using CloudFront. CloudFront Extensions includes rich set of featured Lambda@Edge, CloudFront Functions, CDK templates for various user scenarios and a monitoring API.</p>
<h3 id="one-stop-to-find-lambdaedge-and-cloudfront-function-for-different-use-cases">One stop to find Lambda@Edge and CloudFront Function for different use cases</h3>
<p>CloudFront Extensions offers production level Lambda@Edge and CloudFront Functions for common CloudFront use cases, such as redirect, authentication verification, pre-warm, resizing image.</p>
<h4 id="lambdaedge">Lambda@Edge</h4>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/authentication-with-cognito">Authentication with Cognito</a></td>
<td>Integrate with Cognito to provide authentication service.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/blob/main/edge/nodejs/add-security-headers">Adding security header</a></td>
<td>Add security headers into response after successful authentication.</td>
<td>Add 'strict-transport-security' to force browser using HTTPS.</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/serving-based-on-device">Serving content based on device type</a></td>
<td>Redirect to the different version of an object based on the type of device that the user is using.</td>
<td>Redirect to specific url if the request device is mobile</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/cross-origin-resource-sharing">Cross origin resource sharing</a></td>
<td>Support CORS(Cross Origin Resource Sharing) by Lambda@Edge.</td>
<td>Add headers such as 'access-control-allow-origin', 'access-control-allow-headers'</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/modify-response-status-code">Modify response status code</a></td>
<td>Modify response status code to another status code.</td>
<td>Modify status code from 200 to 206</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/modify-response-header">Modify response header</a></td>
<td>Modify response header as per configuration.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/access-origin-by-weight-rate">Access origin by weight rate</a></td>
<td>Forward request to multiple origin regarding to pre-configured weight for each origin.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/multiple-origin-IP-retry">Failover to alternative origin</a></td>
<td>Failover to alternative IP from pre-configured list, return from success IP otherwise retry until last one.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/http302-from-origin">Support 302 from origin</a></td>
<td>Process 302 response from origin, then access the redirected URL and return the response.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/python/prewarm">Pre-warm</a></td>
<td>This Lambda will prewarm static content in specific pop.</td>
<td>Prewarm content only in North America</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/resize-picture">Resize picture</a></td>
<td>Resize pictures on the fly according to dimensions passed by the query parameter.</td>
<td>Resize a picture from 1000x1000 to 200x300</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/anti-hotlinking">Anti-hotlinking</a></td>
<td>Protect against hotlinking, users need to specify a referer allow list which supports wild card, the request is rejected if the referer is not in the allow list.</td>
<td>Only allow the requests from *.example.com</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/normalize-query-string">Standardize query string</a></td>
<td>Standardize the query string before CloudFront forwards requests to your origin, so that improve the cache hit ratio.</td>
<td>Update https://d111111abcdef8.cloudfront.net/images/image.jpg?Type=demo&amp;Color=red to https://d111111abcdef8.cloudfront.net/images/image.jpg?color=red&amp;type=demo</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/authentication-with-aliyun-cdn-typeA">Authentication with Alibaba Cloud</a></td>
<td>This solution provided by Goclouds Data is designed to achieve ALIYUN CDN authentication.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/rewrite-url">Rewrite host for custom origin</a></td>
<td>Rewrite host for custom origin</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/python/serverless-load-balancer">Serverless load balancer</a></td>
<td>The serverless load balance solution will load balance for your origin via Lambda@Edge which is deployed on CloudFront origin request.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/custom-response-with-replaced-url">Custom response with new URL</a></td>
<td>Replace the response content with a new content.</td>
<td>Replace the url "www.original.com" to "www.new.com" in the response.</td>
</tr>
</tbody>
</table>
<h4 id="cloudfront-functions">CloudFront Functions</h4>
<table>
<thead>
<tr>
<th><strong>Name</strong></th>
<th><strong>Description</strong></th>
<th><strong>Example</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-security-headers">Add security headers</a></td>
<td>Add several response headers to enable web browsers security features.</td>
<td>Add 'strict-transport-security' to force browser using HTTPS.</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/cross-origin-resource-sharing">Cross origin resource sharing</a></td>
<td>Support CORS(Cross Origin Resource Sharing) by CloudFront Function.</td>
<td>Add headers such as 'access-control-allow-origin', 'access-control-allow-headers'</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-cache-control-header">Add cache control headers</a></td>
<td>Add a Cache-Control header for the browser so that content can be cached locally in the browser.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-origin-header">Add origin headers</a></td>
<td>Add an Origin header if it is not present in the incoming request. The Origin header is part of <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS">Cross-Origin resource sharing</a> (CORS), a mechanism using HTTP headers to tell browsers to give a web application running at one origin access to selected resources from a different origin.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-true-client-ip-header">Add true client IP headers</a></td>
<td>Add a True-Client-IP header to include the IP address of a client connecting to CloudFront. Without this header, connections from CloudFront to your origin contain the IP address of the CloudFront server making the request to your origin, not the IP address of the client connected to CloudFront.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/redirect-based-on-country">Redirect based on country</a></td>
<td>Redirect a user to a country-specific version of a site based on the country of the user.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/default-dir-index">Default dir index</a></td>
<td>Append index.html to the end of URLs that don't include a filename or extension.</td>
<td>Update https://d111111abcdef8.cloudfront.net to https://d111111abcdef8.cloudfront.net/index.html</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/verify-jwt">Verify JSON web token</a></td>
<td>Validate a JSON Web Token (JWT) in the query string of the incoming request.</td>
<td>-</td>
</tr>
<tr>
<td><a href="https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/custom-host">Customize request host</a></td>
<td>Replaces host with the value in header awscustomhost.</td>
<td>-</td>
</tr>
</tbody>
</table>
<h3 id="cloudfront-security-automations-with-amazon-waf-and-amazon-shield">CloudFront Security Automations with Amazon WAF and Amazon Shield</h3>
<p>CloudFront Extensions provides a template that allows you to use Amazon WAF and Amazon Shield on CloudFront, it will automatically deploy a set of WAF rules and Shield protection groups into your account to secure your web applications against below attacks</p>
<ul>
<li>SQL Injection and XSS: The solution configures two native WAF rules that are designed to protect against common SQL injection or cross-site scripting (XSS) patterns in the URI, query string, or body of a request.</li>
<li>HTTP flood: This component protects against attacks that consist of a large number of requests from a particular IP address, such as a web-layer DDoS attack or a brute-force login attempt.</li>
<li>Bad Bots: This component automatically sets up a honeypot, which is a security mechanism intended to lure and deflect an attempted attack.</li>
<li>Scanners and Probes: This component parses application access logs searching for suspicious behavior, such as an abnormal amount of errors generated by an origin. It then blocks those suspicious source IP addresses for a customer-defined period of time.</li>
<li>IP Reputation Lists: IP Lists Parser Lambda function which checks third-party IP reputation lists hourly for new ranges to block.</li>
<li>Deny list and allow list: This component creates two specific WAF rules that allow you to manually insert IP addresses that you want to block or allow.</li>
</ul>
<h3 id="monitoring-api-by-analyzing-cloudfront-real-time-logs">Monitoring API by analyzing CloudFront real-time logs</h3>
<p>CloudFront Extensions provides a monitoring API, it obtains metrics such as cache hit rate and download rate by analyzing CloudFront real-time logs, and outputs them through Restful API.</p>
<p>This solution can meet flexible customization requirements, and customize indicator logic from real-time logs according to your specific requirements, which can be implemented only through convenient SQL statements in Athena. The following 10 reference metrics are provided in this example:</p>
<ul>
<li>request: the number of requests from the client to CloudFront</li>
<li>requestOrigin: the number of requests back to the origin</li>
<li>statusCode: the status code from the client to CloudFront</li>
<li>statusCodeOrigin: the status code of the back-to-origin</li>
<li>bandwidth: the bandwidth from the client to CloudFront</li>
<li>bandwidthOrigin: bandwidth back to origin</li>
<li>chr (cache hit rate): cache hit rate calculated by the number of requests</li>
<li>chrBandWith: cache hit ratio calculated by bandwidth</li>
<li>downloadSpeed: download speed from client to CloudFront</li>
<li>downloadSpeedOrigin: The download speed of the back-to-origin</li>
</ul>
<p>The above reference indicators effectively supplement the current CloudWatch monitoring indicators for CloudFront, which can help you understand the operation of CloudFront from multiple dimensions. For the default built-in monitoring metrics of CloudFront, you can refer to <a href="https://docs.aws.amazon.com/zh_cn/AmazonCloudFront/latest/DeveloperGuide/monitoring-using-cloudwatch.html">Monitoring CloudFront with Amazon CloudWatch</a>.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
      
        
        <a href="cost/" class="md-footer__link md-footer__link--next" aria-label="Next: Cost" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Cost
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": ".", "features": ["tabs", "search.suggest", "search.highlight"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="assets/javascripts/bundle.8aa65030.min.js"></script>
      
    
  </body>
</html>