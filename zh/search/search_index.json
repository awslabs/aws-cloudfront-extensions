{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Amazon CloudFront Extensions Amazon CloudFront Extensions\u89e3\u51b3\u65b9\u6848\u5305\u542b\u4e09\u4e2a\u6a21\u5757\uff1aLambda@Edge\u548cCloudFront Functions\u5408\u96c6\u3001\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316\uff0c\u548c\u76d1\u63a7API\uff0c\u4ece\u800c\u5e2e\u52a9\u5ba2\u6237\u66f4\u65b9\u4fbf\u5730\u4f7f\u7528CloudFront\u7684\u62d3\u5c55\u529f\u80fd\u3002 Lambda@Edge & CloudFront Functions\u5408\u96c6 \u672c\u6a21\u5757\u5305\u542b\u4e86\u4e00\u7cfb\u5217Lambda@Edge\u548cCloudFront Functions\uff0c\u8986\u76d6\u4e86\u5982\u9274\u6743\u9a8c\u8bc1\u3001\u9884\u70ed\u3001\u6839\u636e\u8bbe\u5907\u7c7b\u578b\u8df3\u8f6c\u548c\u56fe\u7247\u7f29\u653e\u7b49\u5e38\u7528\u7684\u7528\u6237\u573a\u666f\uff0c\u5177\u4f53\u4fe1\u606f\u89c1\u4e0b\u8868\u3002 Lambda@Edge \u540d\u79f0 \u63cf\u8ff0 \u793a\u4f8b Authentication with Cognito Cognito\u662f\u4e9a\u9a6c\u900a\u7684\u9274\u6743\u670d\u52a1\uff0c\u5f53\u7528\u6237\u901a\u8fc7Cognito\u8fdb\u884c\u9274\u6743\u65f6\uff0c\u672cLambda\u53ef\u9a8c\u8bc1Cognito\u8fd4\u56de\u7684token\u662f\u5426\u5408\u6cd5\u3002 - Add security headers \u5728\u54cd\u5e94\u4e2d\u589e\u52a0\u5b89\u5168\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u901a\u8fc7\u6dfb\u52a0 HSTS'strict-transport-security' \u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528HTTPS\uff0c\u6dfb\u52a0 'x-frame-options' \u9884\u9632\u70b9\u51fb\u52ab\u6301\u3002 Serve content based on device type \u6839\u636e\u8bbe\u5907\u7c7b\u578b\u8df3\u8f6c\u5230\u76f8\u5e94\u94fe\u63a5\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u901a\u8fc7\u624b\u673a\u8bbf\u95ee\uff0c\u5219\u8df3\u8f6c\u5230\u9002\u914d\u624b\u673a\u6837\u5f0f\u7684\u7f51\u7ad9\u3002 Cross origin resource sharing \u5728\u54cd\u5e94\u4e2d\u6dfb\u52a0CORS (Cross Origin Resource Sharing)\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u589e\u52a0 'access-control-allow-origin' \u3001 'access-control-allow-headers' \u7684\u6807\u5934\u3002 Modify response status code \u4fee\u6539\u54cd\u5e94\u7684\u72b6\u6001\u7801\u3002 \u4f8b\u5982\uff0c\u5c06\u72b6\u6001\u7801\u4ece500\u4fee\u6539\u4e3a200\u3002 Modify response header \u4fee\u6539\u54cd\u5e94\u7684\u6807\u5934\u3002 - Access origin by weight rate \u6839\u636e\u63d0\u4f9b\u7684\u6743\u91cd\u8bbf\u95ee\u6e90\u7ad9\u670d\u52a1\u5668\u3002 \u4f8b\u5982\uff0c\u6709\u4e24\u4e2a\u6e90\u7ad9\u670d\u52a1\u5668\uff0c\u6743\u91cd\u5206\u522b\u662f1\u548c2\uff0c\u5219\u4f1a\u6309\u7167\u6b64\u6743\u91cd\u6bd4\u4f8b\u8fdb\u884c\u56de\u6e90\u3002 Failover to alternative origin \u7528\u6237\u53ef\u63d0\u4f9b\u4e00\u4e2a\u6e90\u7ad9\u670d\u52a1\u5668\u5217\u8868\uff0c\u5f53\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6e90\u7ad9\u670d\u52a1\u5668\u4e0d\u53ef\u7528\u65f6\uff0c\u81ea\u52a8\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\uff0c\u76f4\u5230\u627e\u5230\u53ef\u7528\u6e90\u7ad9\u5e76\u53d1\u8d77\u8bf7\u6c42\u3002 - Support 302 from origin \u5f53\u6536\u5230302\u72b6\u6001\u7801\u65f6\uff0c\u76f4\u63a5\u8bf7\u6c42\u76f8\u5e94\u7684\u6e90\u7ad9\uff0c\u800c\u4e0d\u9700\u8981\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u8fdb\u884c302\u8df3\u8f6c\u3002 - Pre-warm \u7528\u6237\u53ef\u6307\u5b9a\u533a\u57df\u8fdb\u884c\u9884\u70ed\u3002 \u4f8b\u5982\uff0c\u5c06100\u4e2aurl\u5728\u7f8e\u56fd\u4e1c\u90e8\u8fdb\u884c\u9884\u70ed\u3002 Resize picture \u6839\u636e\u63d0\u4f9b\u7684\u5bbd\u548c\u9ad8\u7f29\u653e\u56fe\u7247\uff0c\u5e76\u5c06\u7f29\u653e\u540e\u7684\u56fe\u7247\u4fdd\u5b58\u5230Amazon S3\uff0c\u63d0\u9ad8\u4e0b\u6b21\u76f8\u540c\u8bf7\u6c42\u7684\u6548\u7387\u3002 \u4f8b\u5982\uff0c\u5c06\u56fe\u7247\u4ece 1000x1000 \u7f29\u653e\u4e3a 200x300 \u3002 Anti-hotlinking \u53ea\u5141\u8bb8referer\u767d\u540d\u5355\u4e2d\u7684\u8bf7\u6c42\u8bbf\u95ee\u8d44\u6e90\uff0c\u4ece\u800c\u8fbe\u5230\u9632\u76d7\u94fe\u7684\u76ee\u7684\u3002\u76ee\u524d\u767d\u540d\u5355\u652f\u6301'*'\u3001'?'\u7b49\u901a\u914d\u7b26\u3002 \u4f8b\u5982\uff0c\u53ea\u5141\u8bb8referer\u662f www.example.com \u7684\u8bf7\u6c42\u8bbf\u95ee\u7f51\u7ad9\u7684\u56fe\u7247\u3002 Standardize query string \u6807\u51c6\u5316query string\u4ece\u800c\u63d0\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387\uff08CHR\uff09\uff0c\u6b64Lambda\u4f1a\u5c06query string\u8f6c\u4e3a\u5c0f\u5199\u5b57\u6bcd\u5e76\u6309\u7167\u5347\u5e8f\u6392\u5217, \u8be6\u60c5\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002 \u4f8b\u5982\uff0c\u539furl\u662f https://d111111abcdef8.cloudfront.net/images/image.jpg?Type=demo&Color=red, \u6807\u51c6\u5316\u540e\u4f1a\u53d8\u4e3a https://d111111abcdef8.cloudfront.net/images/image.jpg?color=red&type=demo Authentication with Alibaba Cloud \u7531Goclouds\u63d0\u4f9b\uff0c\u5b9e\u73b0\u57fa\u4e8e\u963f\u91cc\u4e91\u7684\u9274\u6743 - Rewrite host for custom origin \u5f53CloudFront\u7684\u6e90\u7ad9\u662f\u81ea\u5b9a\u4e49\u6e90\u7ad9\u65f6\uff0c\u6b64Lambda\u53ef\u4ee5\u91cd\u5199\u8bf7\u6c42\u4e2d\u7684host\u5b57\u6bb5\uff0c\u4ece\u800c\u5b9e\u73b0\u91cd\u5b9a\u5411\u5230\u5176\u4ed6\u6e90\u7ad9\u7684\u529f\u80fd\u3002 - Serverless load balancer \u901a\u8fc7Lambda@Edge\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\uff0c\u8d1f\u8f7d\u4f1a\u5728Amazon DynamoDB\u8868\u683c\u4e2d\u8bb0\u5f55\u3002 - Custom response with new URL \u5c06\u54cd\u5e94\u4e2d\u7684body\u5185\u5bb9\u66ff\u6362\u4e3a\u81ea\u5b9a\u4e49\u5185\u5bb9\u3002 \u4f8b\u5982\uff0c\u54cd\u5e94\u8fd4\u56de\u7684\u662f\u4e2ahtml\uff0c\u6b64Lambda\u53ef\u4ee5\u5c06html\u4e2d\u7684\u6240\u6709'www.original.com'\u5185\u5bb9\u66ff\u6362'www.new.com'\uff0c\u7528\u6237\u53ef\u901a\u8fc7\u6b64Lambda\u5b9e\u73b0\u53ea\u7ef4\u62a4\u4e00\u4e2aS3\u6876\uff0c\u5373\u53ef\u8ba9\u4e24\u4e2a\u4e0d\u540c\u7684\u57df\u540d\u8fdb\u884c\u8bbf\u95ee\u3002 CloudFront Functions \u540d\u79f0 \u63cf\u8ff0 \u793a\u4f8b Add security headers \u5728\u54cd\u5e94\u4e2d\u589e\u52a0\u5b89\u5168\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u901a\u8fc7\u6dfb\u52a0 HSTS'strict-transport-security' \u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528HTTPS\uff0c\u6dfb\u52a0 'x-frame-options' \u9884\u9632\u70b9\u51fb\u52ab\u6301\u3002 Cross origin resource sharing \u5728\u54cd\u5e94\u4e2d\u6dfb\u52a0CORS (Cross Origin Resource Sharing)\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u589e\u52a0 'access-control-allow-origin' \u3001 'access-control-allow-headers' \u7684\u6807\u5934\u3002 Add cache control headers \u6dfb\u52a0Cache-Control\u6807\u5934\uff0c\u4ece\u800c\u5141\u8bb8\u6d4f\u89c8\u5668\u672c\u5730\u7f13\u5b58\u3002 - Add origin headers \u6dfb\u52a0Origin\u6807\u5934\u3002 - Add true client IP headers \u6dfb\u52a0True-Client-IP\u6807\u5934\uff0c\u6b64\u6807\u5934\u662f\u771f\u6b63\u6700\u7ec8\u8fde\u63a5CloudFront\u7684\u5ba2\u6237\u7aef\u7684IP\u3002\u5982\u679c\u6ca1\u6709\u6b64\u6807\u5934\uff0c\u7531CloudFront\u5230\u6e90\u7ad9\u670d\u52a1\u5668\u7684\u8fde\u63a5\uff08\u5373\u6e90\u8bf7\u6c42Origin request\uff09\u53ea\u4f1a\u5305\u542bCloudFront\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff0c\u800c\u4e0d\u662f\u7528\u6237\u7684\u5ba2\u6237\u7aef\u7684IP\u5730\u5740\u3002 - Redirect based on country \u6839\u636e\u7528\u6237\u6240\u5728\u5730\u533a\u8fd4\u56de\u76f8\u5e94\u7684\u5185\u5bb9\u3002 - Default dir index \u4e3aCloudFront\u7684\u94fe\u63a5\u589e\u52a0\u9ed8\u8ba4\u7684\u7ed3\u5c3e\u3002 \u4e3a\u6240\u6709\u4ee5'/'\u7ed3\u5c3e\u7684url\u589e\u52a0index.html\u3002 Verify JSON web token \u9a8c\u8bc1query string\u4e2d\u7684JSON Web Token (JWT)\uff0c\u4e00\u822c\u7528\u4e8e\u9274\u6743\u573a\u666f\u3002 - Customize request host \u5c06host\u66ff\u6362\u4e3a\u81ea\u5b9a\u4e49\u7684\u6807\u5934\u7684\u5185\u5bb9\u3002 \u4f8b\u5982\uff0c\u7528\u6237\u53ef\u81ea\u5b9a\u4e49\u4e00\u4e2a\u6807\u5934awscustomhost\uff0c\u6700\u7ec8host\u4f1a\u88ab\u66ff\u6362\u4e3a\u6b64\u6807\u5934\u7684\u5185\u5bb9\u3002 \u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316 \u672c\u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5728Amazon CloudFront\u4e0a\u5feb\u901f\u4f7f\u7528Amazon WAF\u548cAmazon Shield Advanced\u7684\u6a21\u677f\uff0c\u5b83\u53ef\u4ee5\u81ea\u52a8\u5411\u60a8\u7684\u8d26\u53f7\u4e2d\u90e8\u7f72\u4e00\u5957WAF\u89c4\u5219\u548cShield\u4fdd\u62a4\u7ec4\uff0c\u4ece\u800c\u4e3a\u60a8\u7684CloudFront\u63d0\u4f9b\u5982\u4e0b\u4fdd\u62a4\uff1a SQL\u6ce8\u5165\u548cXSS\uff1a\u8be5\u89e3\u51b3\u65b9\u6848\u914d\u7f6e\u4e86\u4e24\u4e2a\u672c\u673aWAF\u89c4\u5219\uff0c\u65e8\u5728\u9632\u6b62URI\u3001\u67e5\u8be2\u5b57\u7b26\u4e32\u6216\u8bf7\u6c42\u6b63\u6587\u4e2d\u51fa\u73b0\u5e38\u89c1\u7684SQL\u6ce8\u5165\u6216\u8de8\u7ad9\u70b9\u811a\u672c\uff08XSS\uff09\u6a21\u5f0f\u3002 HTTP\u6cdb\u6d2a\uff1a\u8be5\u7ec4\u4ef6\u53ef\u9632\u6b62\u6765\u81ea\u7279\u5b9aIP\u5730\u5740\u7684\u5927\u91cf\u8bf7\u6c42\u6784\u6210\u7684\u653b\u51fb\uff0c\u4f8b\u5982web\u5c42DDoS\u653b\u51fb\u6216\u66b4\u529b\u767b\u5f55\u5c1d\u8bd5\u3002 \u65e5\u5fd7\u626b\u63cf\u5668\uff1a\u8be5\u7ec4\u4ef6\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u8bbf\u95ee\u65e5\u5fd7\uff0c\u641c\u7d22\u53ef\u7591\u884c\u4e3a\uff0c\u4f8b\u5982\u72b6\u6001\u7801\u4e3a500\u3002\u7136\u540e\uff0c\u5b83\u4f1a\u5728\u5ba2\u6237\u5b9a\u4e49\u7684\u4e00\u6bb5\u65f6\u95f4\u5185\u5c4f\u853d\u8fd9\u4e9b\u53ef\u7591\u7684\u6e90IP\u5730\u5740\u3002 IP\u4fe1\u8a89\u5217\u8868\uff1a\u5b9a\u671f\u83b7\u53d6\u7b2c\u4e09\u65b9\u63d0\u4f9b\u7684IP\u4fe1\u8a89\u5217\u8868\uff0c\u9632\u6b62\u4fe1\u8a89\u5dee\u7684IP\u8bbf\u95ee\u60a8\u7684\u7f51\u7ad9\u3002 \u722c\u866b\uff1a\u8bbe\u7f6e\u4e00\u4e2a\u871c\u7f50\u94fe\u63a5\uff0c\u60a8\u53ef\u5c06\u5176\u6dfb\u52a0\u5230\u7f51\u9875\u4e2d\uff0c\u901a\u8fc7\u5c06\u5176\u8bbe\u7f6e\u4e3a\u9690\u85cf\uff0c\u4ece\u800c\u4fdd\u8bc1\u7528\u6237\u65e0\u6cd5\u770b\u5230\u6b64\u94fe\u63a5\u3002\u5982\u679c\u6b64\u94fe\u63a5\u88ab\u70b9\u51fb\u65f6\u5219\u662f\u7531\u722c\u866b\u89e6\u53d1\u7684\uff0c\u4ece\u800c\u8bc6\u522b\u51fa\u722c\u866b\u5e76\u8fdb\u884c\u9632\u5fa1\u3002 IP\u9ed1\u540d\u5355\u548c\u767d\u540d\u5355\uff1a\u8be5\u7ec4\u4ef6\u521b\u5efa\u4e24\u4e2a\u7279\u5b9a\u7684WAF\u89c4\u5219\uff0c\u5141\u8bb8\u60a8\u624b\u52a8\u63d2\u5165\u8981\u963b\u6b62\u6216\u5141\u8bb8\u7684IP\u5730\u5740\u3002 CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API \u672c\u6a21\u5757\u901a\u8fc7\u5206\u6790CloudFront\u5b9e\u65f6\u65e5\u5fd7\u83b7\u53d6Cache Hit Rate\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09\u3001\u4e0b\u8f7d\u901f\u7387\u7b49\u6307\u6807\uff0c\u5e76\u901a\u8fc7RESTful API\u8f93\u51fa\u3002 \u76d1\u63a7API\u53ef\u4ee5\u6ee1\u8db3\u7075\u6d3b\u7684\u5b9a\u5236\u5316\u9700\u6c42\uff0c\u6839\u636e\u60a8\u7684\u7279\u5b9a\u9700\u6c42\u4ece\u5b9e\u65f6\u65e5\u5fd7\u4e2d\u81ea\u5b9a\u4e49\u6307\u6807\u903b\u8f91\uff0c\u53ea\u9700\u8981\u5728Amazon Athena\u4e2d\u901a\u8fc7SQL\u8bed\u53e5\u5c31\u53ef\u4ee5\u5b9e\u73b0\u3002\u4ee5\u4e0b\u662f\u63d0\u4f9b\u768410\u4e2a\u53c2\u8003\u6307\u6807\uff1a request: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u8bf7\u6c42\u6570\u91cf requestOrigin: \u56de\u6e90\u7684\u8bf7\u6c42\u6570\u91cf statusCode: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u72b6\u6001\u7801 statusCodeOrigin: \u56de\u6e90\u7684\u72b6\u6001\u7801 bandwidth: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u5e26\u5bbd bandwidthOrigin: \u56de\u6e90\u7684\u5e26\u5bbd chr: \u901a\u8fc7\u8bf7\u6c42\u6570\u91cf\u8ba1\u7b97\u7684\u7f13\u5b58\u547d\u4e2d\u7387 chrBandWith: \u901a\u8fc7\u5e26\u5bbd\u8ba1\u7b97\u7684\u7f13\u5b58\u547d\u4e2d\u7387 downloadSpeed: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u4e0b\u8f7d\u901f\u7387 downloadSpeedOrigin: \u56de\u6e90\u7684\u4e0b\u8f7d\u901f\u7387 \u4e0a\u8ff0\u53c2\u8003\u6307\u6807\u6709\u6548\u5730\u8865\u5145\u4e86\u76ee\u524dCloudWatch\u5bf9CloudFront\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4ece\u591a\u4e2a\u7ef4\u5ea6\u4e86\u89e3CloudFront\u7684\u8fd0\u884c\u60c5\u51b5\u3002\u8be6\u60c5\u8bf7\u89c1 \u535a\u5ba2 \uff0c\u6709\u5173CloudFront\u9ed8\u8ba4\u5185\u7f6e\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u53c2\u8003 \u4f7f\u7528Amazon CloudWatch\u76d1\u63a7CloudFront \u3002 \u672c\u5b9e\u65bd\u6307\u5357\u4ecb\u7ecd\u5728Amazon Web Services\uff08\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\uff09\u4e91\u4e2d\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u67b6\u6784\u4fe1\u606f\u548c\u5177\u4f53\u914d\u7f6e\u6b65\u9aa4\u3002\u5b83\u5305\u542b\u6307\u5411 CloudFormation \u6a21\u677f\u7684\u94fe\u63a5\uff0c\u8fd9\u4e9b\u6a21\u677f\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5728\u5b89\u5168\u6027\u548c\u53ef\u7528\u6027\u65b9\u9762\u7684\u6700\u4f73\u5b9e\u8df5\u6765\u542f\u52a8\u548c\u914d\u7f6e\u672c\u89e3\u51b3\u65b9\u6848\u6240\u9700\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u670d\u52a1\u3002 \u672c\u6307\u5357\u9762\u5411\u5177\u6709\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u67b6\u6784\u5b9e\u8df5\u7ecf\u9a8c\u7684IT\u67b6\u6784\u5e08\u3001\u5f00\u53d1\u4eba\u5458\u7b49\u4e13\u4e1a\u4eba\u58eb\u3002","title":"\u6982\u8ff0"},{"location":"#amazon-cloudfront-extensions","text":"Amazon CloudFront Extensions\u89e3\u51b3\u65b9\u6848\u5305\u542b\u4e09\u4e2a\u6a21\u5757\uff1aLambda@Edge\u548cCloudFront Functions\u5408\u96c6\u3001\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316\uff0c\u548c\u76d1\u63a7API\uff0c\u4ece\u800c\u5e2e\u52a9\u5ba2\u6237\u66f4\u65b9\u4fbf\u5730\u4f7f\u7528CloudFront\u7684\u62d3\u5c55\u529f\u80fd\u3002","title":"Amazon CloudFront Extensions"},{"location":"#lambdaedge-cloudfront-functions","text":"\u672c\u6a21\u5757\u5305\u542b\u4e86\u4e00\u7cfb\u5217Lambda@Edge\u548cCloudFront Functions\uff0c\u8986\u76d6\u4e86\u5982\u9274\u6743\u9a8c\u8bc1\u3001\u9884\u70ed\u3001\u6839\u636e\u8bbe\u5907\u7c7b\u578b\u8df3\u8f6c\u548c\u56fe\u7247\u7f29\u653e\u7b49\u5e38\u7528\u7684\u7528\u6237\u573a\u666f\uff0c\u5177\u4f53\u4fe1\u606f\u89c1\u4e0b\u8868\u3002","title":"Lambda@Edge &amp; CloudFront Functions\u5408\u96c6"},{"location":"#lambdaedge","text":"\u540d\u79f0 \u63cf\u8ff0 \u793a\u4f8b Authentication with Cognito Cognito\u662f\u4e9a\u9a6c\u900a\u7684\u9274\u6743\u670d\u52a1\uff0c\u5f53\u7528\u6237\u901a\u8fc7Cognito\u8fdb\u884c\u9274\u6743\u65f6\uff0c\u672cLambda\u53ef\u9a8c\u8bc1Cognito\u8fd4\u56de\u7684token\u662f\u5426\u5408\u6cd5\u3002 - Add security headers \u5728\u54cd\u5e94\u4e2d\u589e\u52a0\u5b89\u5168\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u901a\u8fc7\u6dfb\u52a0 HSTS'strict-transport-security' \u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528HTTPS\uff0c\u6dfb\u52a0 'x-frame-options' \u9884\u9632\u70b9\u51fb\u52ab\u6301\u3002 Serve content based on device type \u6839\u636e\u8bbe\u5907\u7c7b\u578b\u8df3\u8f6c\u5230\u76f8\u5e94\u94fe\u63a5\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u901a\u8fc7\u624b\u673a\u8bbf\u95ee\uff0c\u5219\u8df3\u8f6c\u5230\u9002\u914d\u624b\u673a\u6837\u5f0f\u7684\u7f51\u7ad9\u3002 Cross origin resource sharing \u5728\u54cd\u5e94\u4e2d\u6dfb\u52a0CORS (Cross Origin Resource Sharing)\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u589e\u52a0 'access-control-allow-origin' \u3001 'access-control-allow-headers' \u7684\u6807\u5934\u3002 Modify response status code \u4fee\u6539\u54cd\u5e94\u7684\u72b6\u6001\u7801\u3002 \u4f8b\u5982\uff0c\u5c06\u72b6\u6001\u7801\u4ece500\u4fee\u6539\u4e3a200\u3002 Modify response header \u4fee\u6539\u54cd\u5e94\u7684\u6807\u5934\u3002 - Access origin by weight rate \u6839\u636e\u63d0\u4f9b\u7684\u6743\u91cd\u8bbf\u95ee\u6e90\u7ad9\u670d\u52a1\u5668\u3002 \u4f8b\u5982\uff0c\u6709\u4e24\u4e2a\u6e90\u7ad9\u670d\u52a1\u5668\uff0c\u6743\u91cd\u5206\u522b\u662f1\u548c2\uff0c\u5219\u4f1a\u6309\u7167\u6b64\u6743\u91cd\u6bd4\u4f8b\u8fdb\u884c\u56de\u6e90\u3002 Failover to alternative origin \u7528\u6237\u53ef\u63d0\u4f9b\u4e00\u4e2a\u6e90\u7ad9\u670d\u52a1\u5668\u5217\u8868\uff0c\u5f53\u5217\u8868\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6e90\u7ad9\u670d\u52a1\u5668\u4e0d\u53ef\u7528\u65f6\uff0c\u81ea\u52a8\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\uff0c\u76f4\u5230\u627e\u5230\u53ef\u7528\u6e90\u7ad9\u5e76\u53d1\u8d77\u8bf7\u6c42\u3002 - Support 302 from origin \u5f53\u6536\u5230302\u72b6\u6001\u7801\u65f6\uff0c\u76f4\u63a5\u8bf7\u6c42\u76f8\u5e94\u7684\u6e90\u7ad9\uff0c\u800c\u4e0d\u9700\u8981\u8fd4\u56de\u7ed9\u5ba2\u6237\u7aef\u8fdb\u884c302\u8df3\u8f6c\u3002 - Pre-warm \u7528\u6237\u53ef\u6307\u5b9a\u533a\u57df\u8fdb\u884c\u9884\u70ed\u3002 \u4f8b\u5982\uff0c\u5c06100\u4e2aurl\u5728\u7f8e\u56fd\u4e1c\u90e8\u8fdb\u884c\u9884\u70ed\u3002 Resize picture \u6839\u636e\u63d0\u4f9b\u7684\u5bbd\u548c\u9ad8\u7f29\u653e\u56fe\u7247\uff0c\u5e76\u5c06\u7f29\u653e\u540e\u7684\u56fe\u7247\u4fdd\u5b58\u5230Amazon S3\uff0c\u63d0\u9ad8\u4e0b\u6b21\u76f8\u540c\u8bf7\u6c42\u7684\u6548\u7387\u3002 \u4f8b\u5982\uff0c\u5c06\u56fe\u7247\u4ece 1000x1000 \u7f29\u653e\u4e3a 200x300 \u3002 Anti-hotlinking \u53ea\u5141\u8bb8referer\u767d\u540d\u5355\u4e2d\u7684\u8bf7\u6c42\u8bbf\u95ee\u8d44\u6e90\uff0c\u4ece\u800c\u8fbe\u5230\u9632\u76d7\u94fe\u7684\u76ee\u7684\u3002\u76ee\u524d\u767d\u540d\u5355\u652f\u6301'*'\u3001'?'\u7b49\u901a\u914d\u7b26\u3002 \u4f8b\u5982\uff0c\u53ea\u5141\u8bb8referer\u662f www.example.com \u7684\u8bf7\u6c42\u8bbf\u95ee\u7f51\u7ad9\u7684\u56fe\u7247\u3002 Standardize query string \u6807\u51c6\u5316query string\u4ece\u800c\u63d0\u9ad8\u7f13\u5b58\u547d\u4e2d\u7387\uff08CHR\uff09\uff0c\u6b64Lambda\u4f1a\u5c06query string\u8f6c\u4e3a\u5c0f\u5199\u5b57\u6bcd\u5e76\u6309\u7167\u5347\u5e8f\u6392\u5217, \u8be6\u60c5\u53ef\u53c2\u8003 \u94fe\u63a5 \u3002 \u4f8b\u5982\uff0c\u539furl\u662f https://d111111abcdef8.cloudfront.net/images/image.jpg?Type=demo&Color=red, \u6807\u51c6\u5316\u540e\u4f1a\u53d8\u4e3a https://d111111abcdef8.cloudfront.net/images/image.jpg?color=red&type=demo Authentication with Alibaba Cloud \u7531Goclouds\u63d0\u4f9b\uff0c\u5b9e\u73b0\u57fa\u4e8e\u963f\u91cc\u4e91\u7684\u9274\u6743 - Rewrite host for custom origin \u5f53CloudFront\u7684\u6e90\u7ad9\u662f\u81ea\u5b9a\u4e49\u6e90\u7ad9\u65f6\uff0c\u6b64Lambda\u53ef\u4ee5\u91cd\u5199\u8bf7\u6c42\u4e2d\u7684host\u5b57\u6bb5\uff0c\u4ece\u800c\u5b9e\u73b0\u91cd\u5b9a\u5411\u5230\u5176\u4ed6\u6e90\u7ad9\u7684\u529f\u80fd\u3002 - Serverless load balancer \u901a\u8fc7Lambda@Edge\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\u529f\u80fd\uff0c\u8d1f\u8f7d\u4f1a\u5728Amazon DynamoDB\u8868\u683c\u4e2d\u8bb0\u5f55\u3002 - Custom response with new URL \u5c06\u54cd\u5e94\u4e2d\u7684body\u5185\u5bb9\u66ff\u6362\u4e3a\u81ea\u5b9a\u4e49\u5185\u5bb9\u3002 \u4f8b\u5982\uff0c\u54cd\u5e94\u8fd4\u56de\u7684\u662f\u4e2ahtml\uff0c\u6b64Lambda\u53ef\u4ee5\u5c06html\u4e2d\u7684\u6240\u6709'www.original.com'\u5185\u5bb9\u66ff\u6362'www.new.com'\uff0c\u7528\u6237\u53ef\u901a\u8fc7\u6b64Lambda\u5b9e\u73b0\u53ea\u7ef4\u62a4\u4e00\u4e2aS3\u6876\uff0c\u5373\u53ef\u8ba9\u4e24\u4e2a\u4e0d\u540c\u7684\u57df\u540d\u8fdb\u884c\u8bbf\u95ee\u3002","title":"Lambda@Edge"},{"location":"#cloudfront-functions","text":"\u540d\u79f0 \u63cf\u8ff0 \u793a\u4f8b Add security headers \u5728\u54cd\u5e94\u4e2d\u589e\u52a0\u5b89\u5168\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u901a\u8fc7\u6dfb\u52a0 HSTS'strict-transport-security' \u5f3a\u5236\u6d4f\u89c8\u5668\u4f7f\u7528HTTPS\uff0c\u6dfb\u52a0 'x-frame-options' \u9884\u9632\u70b9\u51fb\u52ab\u6301\u3002 Cross origin resource sharing \u5728\u54cd\u5e94\u4e2d\u6dfb\u52a0CORS (Cross Origin Resource Sharing)\u6807\u5934\u3002 \u4f8b\u5982\uff0c\u589e\u52a0 'access-control-allow-origin' \u3001 'access-control-allow-headers' \u7684\u6807\u5934\u3002 Add cache control headers \u6dfb\u52a0Cache-Control\u6807\u5934\uff0c\u4ece\u800c\u5141\u8bb8\u6d4f\u89c8\u5668\u672c\u5730\u7f13\u5b58\u3002 - Add origin headers \u6dfb\u52a0Origin\u6807\u5934\u3002 - Add true client IP headers \u6dfb\u52a0True-Client-IP\u6807\u5934\uff0c\u6b64\u6807\u5934\u662f\u771f\u6b63\u6700\u7ec8\u8fde\u63a5CloudFront\u7684\u5ba2\u6237\u7aef\u7684IP\u3002\u5982\u679c\u6ca1\u6709\u6b64\u6807\u5934\uff0c\u7531CloudFront\u5230\u6e90\u7ad9\u670d\u52a1\u5668\u7684\u8fde\u63a5\uff08\u5373\u6e90\u8bf7\u6c42Origin request\uff09\u53ea\u4f1a\u5305\u542bCloudFront\u670d\u52a1\u5668\u7684IP\u5730\u5740\uff0c\u800c\u4e0d\u662f\u7528\u6237\u7684\u5ba2\u6237\u7aef\u7684IP\u5730\u5740\u3002 - Redirect based on country \u6839\u636e\u7528\u6237\u6240\u5728\u5730\u533a\u8fd4\u56de\u76f8\u5e94\u7684\u5185\u5bb9\u3002 - Default dir index \u4e3aCloudFront\u7684\u94fe\u63a5\u589e\u52a0\u9ed8\u8ba4\u7684\u7ed3\u5c3e\u3002 \u4e3a\u6240\u6709\u4ee5'/'\u7ed3\u5c3e\u7684url\u589e\u52a0index.html\u3002 Verify JSON web token \u9a8c\u8bc1query string\u4e2d\u7684JSON Web Token (JWT)\uff0c\u4e00\u822c\u7528\u4e8e\u9274\u6743\u573a\u666f\u3002 - Customize request host \u5c06host\u66ff\u6362\u4e3a\u81ea\u5b9a\u4e49\u7684\u6807\u5934\u7684\u5185\u5bb9\u3002 \u4f8b\u5982\uff0c\u7528\u6237\u53ef\u81ea\u5b9a\u4e49\u4e00\u4e2a\u6807\u5934awscustomhost\uff0c\u6700\u7ec8host\u4f1a\u88ab\u66ff\u6362\u4e3a\u6b64\u6807\u5934\u7684\u5185\u5bb9\u3002","title":"CloudFront Functions"},{"location":"#amazon-wafamazon-shieldcloudfront","text":"\u672c\u6a21\u5757\u63d0\u4f9b\u4e86\u4e00\u4e2a\u5728Amazon CloudFront\u4e0a\u5feb\u901f\u4f7f\u7528Amazon WAF\u548cAmazon Shield Advanced\u7684\u6a21\u677f\uff0c\u5b83\u53ef\u4ee5\u81ea\u52a8\u5411\u60a8\u7684\u8d26\u53f7\u4e2d\u90e8\u7f72\u4e00\u5957WAF\u89c4\u5219\u548cShield\u4fdd\u62a4\u7ec4\uff0c\u4ece\u800c\u4e3a\u60a8\u7684CloudFront\u63d0\u4f9b\u5982\u4e0b\u4fdd\u62a4\uff1a SQL\u6ce8\u5165\u548cXSS\uff1a\u8be5\u89e3\u51b3\u65b9\u6848\u914d\u7f6e\u4e86\u4e24\u4e2a\u672c\u673aWAF\u89c4\u5219\uff0c\u65e8\u5728\u9632\u6b62URI\u3001\u67e5\u8be2\u5b57\u7b26\u4e32\u6216\u8bf7\u6c42\u6b63\u6587\u4e2d\u51fa\u73b0\u5e38\u89c1\u7684SQL\u6ce8\u5165\u6216\u8de8\u7ad9\u70b9\u811a\u672c\uff08XSS\uff09\u6a21\u5f0f\u3002 HTTP\u6cdb\u6d2a\uff1a\u8be5\u7ec4\u4ef6\u53ef\u9632\u6b62\u6765\u81ea\u7279\u5b9aIP\u5730\u5740\u7684\u5927\u91cf\u8bf7\u6c42\u6784\u6210\u7684\u653b\u51fb\uff0c\u4f8b\u5982web\u5c42DDoS\u653b\u51fb\u6216\u66b4\u529b\u767b\u5f55\u5c1d\u8bd5\u3002 \u65e5\u5fd7\u626b\u63cf\u5668\uff1a\u8be5\u7ec4\u4ef6\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u8bbf\u95ee\u65e5\u5fd7\uff0c\u641c\u7d22\u53ef\u7591\u884c\u4e3a\uff0c\u4f8b\u5982\u72b6\u6001\u7801\u4e3a500\u3002\u7136\u540e\uff0c\u5b83\u4f1a\u5728\u5ba2\u6237\u5b9a\u4e49\u7684\u4e00\u6bb5\u65f6\u95f4\u5185\u5c4f\u853d\u8fd9\u4e9b\u53ef\u7591\u7684\u6e90IP\u5730\u5740\u3002 IP\u4fe1\u8a89\u5217\u8868\uff1a\u5b9a\u671f\u83b7\u53d6\u7b2c\u4e09\u65b9\u63d0\u4f9b\u7684IP\u4fe1\u8a89\u5217\u8868\uff0c\u9632\u6b62\u4fe1\u8a89\u5dee\u7684IP\u8bbf\u95ee\u60a8\u7684\u7f51\u7ad9\u3002 \u722c\u866b\uff1a\u8bbe\u7f6e\u4e00\u4e2a\u871c\u7f50\u94fe\u63a5\uff0c\u60a8\u53ef\u5c06\u5176\u6dfb\u52a0\u5230\u7f51\u9875\u4e2d\uff0c\u901a\u8fc7\u5c06\u5176\u8bbe\u7f6e\u4e3a\u9690\u85cf\uff0c\u4ece\u800c\u4fdd\u8bc1\u7528\u6237\u65e0\u6cd5\u770b\u5230\u6b64\u94fe\u63a5\u3002\u5982\u679c\u6b64\u94fe\u63a5\u88ab\u70b9\u51fb\u65f6\u5219\u662f\u7531\u722c\u866b\u89e6\u53d1\u7684\uff0c\u4ece\u800c\u8bc6\u522b\u51fa\u722c\u866b\u5e76\u8fdb\u884c\u9632\u5fa1\u3002 IP\u9ed1\u540d\u5355\u548c\u767d\u540d\u5355\uff1a\u8be5\u7ec4\u4ef6\u521b\u5efa\u4e24\u4e2a\u7279\u5b9a\u7684WAF\u89c4\u5219\uff0c\u5141\u8bb8\u60a8\u624b\u52a8\u63d2\u5165\u8981\u963b\u6b62\u6216\u5141\u8bb8\u7684IP\u5730\u5740\u3002","title":"\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316"},{"location":"#cloudfrontapi","text":"\u672c\u6a21\u5757\u901a\u8fc7\u5206\u6790CloudFront\u5b9e\u65f6\u65e5\u5fd7\u83b7\u53d6Cache Hit Rate\uff08\u7f13\u5b58\u547d\u4e2d\u7387\uff09\u3001\u4e0b\u8f7d\u901f\u7387\u7b49\u6307\u6807\uff0c\u5e76\u901a\u8fc7RESTful API\u8f93\u51fa\u3002 \u76d1\u63a7API\u53ef\u4ee5\u6ee1\u8db3\u7075\u6d3b\u7684\u5b9a\u5236\u5316\u9700\u6c42\uff0c\u6839\u636e\u60a8\u7684\u7279\u5b9a\u9700\u6c42\u4ece\u5b9e\u65f6\u65e5\u5fd7\u4e2d\u81ea\u5b9a\u4e49\u6307\u6807\u903b\u8f91\uff0c\u53ea\u9700\u8981\u5728Amazon Athena\u4e2d\u901a\u8fc7SQL\u8bed\u53e5\u5c31\u53ef\u4ee5\u5b9e\u73b0\u3002\u4ee5\u4e0b\u662f\u63d0\u4f9b\u768410\u4e2a\u53c2\u8003\u6307\u6807\uff1a request: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u8bf7\u6c42\u6570\u91cf requestOrigin: \u56de\u6e90\u7684\u8bf7\u6c42\u6570\u91cf statusCode: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u72b6\u6001\u7801 statusCodeOrigin: \u56de\u6e90\u7684\u72b6\u6001\u7801 bandwidth: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u5e26\u5bbd bandwidthOrigin: \u56de\u6e90\u7684\u5e26\u5bbd chr: \u901a\u8fc7\u8bf7\u6c42\u6570\u91cf\u8ba1\u7b97\u7684\u7f13\u5b58\u547d\u4e2d\u7387 chrBandWith: \u901a\u8fc7\u5e26\u5bbd\u8ba1\u7b97\u7684\u7f13\u5b58\u547d\u4e2d\u7387 downloadSpeed: \u4ece\u5ba2\u6237\u7aef\u5230CloudFront\u7684\u4e0b\u8f7d\u901f\u7387 downloadSpeedOrigin: \u56de\u6e90\u7684\u4e0b\u8f7d\u901f\u7387 \u4e0a\u8ff0\u53c2\u8003\u6307\u6807\u6709\u6548\u5730\u8865\u5145\u4e86\u76ee\u524dCloudWatch\u5bf9CloudFront\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u5e2e\u52a9\u60a8\u4ece\u591a\u4e2a\u7ef4\u5ea6\u4e86\u89e3CloudFront\u7684\u8fd0\u884c\u60c5\u51b5\u3002\u8be6\u60c5\u8bf7\u89c1 \u535a\u5ba2 \uff0c\u6709\u5173CloudFront\u9ed8\u8ba4\u5185\u7f6e\u7684\u76d1\u63a7\u6307\u6807\uff0c\u53ef\u4ee5\u53c2\u8003 \u4f7f\u7528Amazon CloudWatch\u76d1\u63a7CloudFront \u3002 \u672c\u5b9e\u65bd\u6307\u5357\u4ecb\u7ecd\u5728Amazon Web Services\uff08\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\uff09\u4e91\u4e2d\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u7684\u67b6\u6784\u4fe1\u606f\u548c\u5177\u4f53\u914d\u7f6e\u6b65\u9aa4\u3002\u5b83\u5305\u542b\u6307\u5411 CloudFormation \u6a21\u677f\u7684\u94fe\u63a5\uff0c\u8fd9\u4e9b\u6a21\u677f\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5728\u5b89\u5168\u6027\u548c\u53ef\u7528\u6027\u65b9\u9762\u7684\u6700\u4f73\u5b9e\u8df5\u6765\u542f\u52a8\u548c\u914d\u7f6e\u672c\u89e3\u51b3\u65b9\u6848\u6240\u9700\u7684\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u670d\u52a1\u3002 \u672c\u6307\u5357\u9762\u5411\u5177\u6709\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u67b6\u6784\u5b9e\u8df5\u7ecf\u9a8c\u7684IT\u67b6\u6784\u5e08\u3001\u5f00\u53d1\u4eba\u5458\u7b49\u4e13\u4e1a\u4eba\u58eb\u3002","title":"CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API"},{"location":"additional-resources/","text":"Amazon API Gateway Amazon Athena Amazon CloudFront Amazon CloudFront Functions Amazon CloudFormation Amazon Cognito Amazon DynamoDB Amazon Glue Amazon Kinesis Amazon Kinesis Data Firehose Amazon Lambda Amazon Lambda@Edge Amazon Shield Amazon Simple Storage Service (Amazon S3) Amazon WAF","title":"\u66f4\u591a\u8d44\u6e90"},{"location":"architecture/","text":"\u4f7f\u7528\u9ed8\u8ba4\u53c2\u6570\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u540e\uff0c\u5728\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e2d\u6784\u5efa\u7684\u73af\u5883\u5982\u4e0b\u56fe\u6240\u793a\u3002 \u56fe1\uff1a\u65b9\u6848\u67b6\u6784 Lambda@Edge & CloudFront Functions\u5408\u96c6 \u672c\u6a21\u5757\u5305\u542b\u591a\u4e2a\u53ef\u901a\u8fc7SAR (Serverless Application Repository)\u90e8\u7f72\u7684Lambda@Edge\u51fd\u6570\u548c\u901a\u8fc7CloudFormation\u90e8\u7f72\u7684CloudFront Functions\u3002 \u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316 \u56fe2\uff1a\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316\u67b6\u6784 \u672c\u6a21\u5757\u901a\u8fc7CloudFormation\u6a21\u7248\u4f1a\u81ea\u52a8\u90e8\u7f72\u4e00\u7cfb\u5217\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u670d\u52a1\uff0c\u5176\u4e2d\u5305\u542bAmazon WAF\u3001Amazon Shield Advanced\u3001Amazon Lambda\u3001Amazon Athena\u3001Amazon API Gateway\u7b49\u3002 Shield Deployment Lambda\u51fd\u6570\uff1a\u81ea\u52a8\u90e8\u7f72Shield Advanced\u5b89\u5168\u7ec4\u548c\u88ab\u4fdd\u62a4\u8d44\u6e90\uff0c\u4ece\u800c\u9632\u5fa1DDoS\u653b\u51fb\u3002 Log Parser Lambda\u51fd\u6570\uff1a\u8c03\u7528Athena\u5bf9CloudFront\u6807\u51c6\u65e5\u5fd7\u548cWAF\u65e5\u5fd7\u8fdb\u884c\u67e5\u8be2\uff0c\u627e\u5230\u6307\u5b9a\u65f6\u95f4\u5185\u8d85\u8fc7\u9608\u503c\u7684IP\uff0c\u5c06\u5176\u66f4\u65b0\u5230WAF\u4e2d\uff0c\u4ece\u800c\u9632\u5fa1DDoS\u653b\u51fb\u3002 Badbot Parser Lambda\u51fd\u6570\uff1a\u5f53\u6709\u722c\u866b\u70b9\u51fb\u9677\u9631\u94fe\u63a5\u65f6\uff0c\u5c06\u5176IP\u66f4\u65b0\u5230WAF\u4e2d\uff0c\u4ece\u800c\u963b\u6b62\u722c\u866b\u7ee7\u7eed\u722c\u53d6\u7f51\u7ad9\u5185\u5bb9\u3002 IP List Parser Lambda\u51fd\u6570\uff1aCloudWatch\u4f1a\u5b9a\u65f6\u8c03\u7528\u6b64\u51fd\u6570\u4ece\u7b2c\u4e09\u65b9\u7f51\u7ad9\u66f4\u65b0\u6709\u98ce\u9669\u7684IP\u5217\u8868\u3002 \u81ea\u52a8\u90e8\u7f72\u7684WAF\u89c4\u5219\u4f1a\u5bf9SQL\u6ce8\u5165\u653b\u51fb\u548c\u8de8\u7ad9\u811a\u672c\u653b\u51fb\u8fdb\u884c\u9632\u5fa1\u3002 CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API \u56fe3\uff1aCloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API\u67b6\u6784 \u672c\u6a21\u5757\u4e3b\u8981\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u5f00\u542fCloudFront\u5b9e\u65f6\u65e5\u5fd7 \u5f00\u542f\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u914d\u7f6e\u5bf9\u5e94\u7684Kinesis Data Stream\u6570\u636e\u6d41\u3002 \u8bbe\u7f6eKinesis Data Firehose\u5feb\u901f\u5b8c\u6210\u6570\u636e\u4f20\u8f93 CloudFront\u7684\u5b9e\u65f6\u65e5\u5fd7\u4f1a\u4f9d\u6b21\u901a\u8fc7Kinesis Data Stream\u548cKinesis Data Firehose\uff0c\u6700\u7ec8\u5b58\u50a8\u5230Amazon S3\u6876\u4e2d\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0cKinesis Data Firehose\u4f1a\u8c03\u7528Amazon Lambda\u51fd\u6570Log Transformer\u5b9e\u73b0\u901a\u8fc7\u5ba2\u6237\u7aefIP\u627e\u5230ISP\u548c\u56fd\u5bb6\u4ee3\u7801\uff0c\u4ece\u800c\u4ee5\u56fd\u5bb6\u4ee3\u7801\u548c\u8fd0\u8425\u5546\u4e3a\u5355\u4f4d\u5bf9\u4e0b\u8f7d\u901f\u7387\u6307\u6807\u8fdb\u884c\u5206\u7c7b\uff0c\u5e76\u914d\u5408Kinesis Data Firehose\u5b9e\u73b0\u52a8\u6001\u5206\u533a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5c06\u5b9e\u65f6\u65e5\u5fd7\u901a\u8fc7\u5206\u533a\u952e\u8fdb\u884c\u5206\u533a\uff0c\u5e76\u5b58\u50a8\u5230Amazon S3\u6876\u4e2d\uff0c\u5982year=2021/month=12/day=10\u3002 \u901a\u8fc7Athena\u67e5\u8be2S3\u4e2d\u7684\u5b9e\u65f6\u65e5\u5fd7 \u4e3a\u4e86\u8ba9Amazon Athena\u901a\u8fc7\u6570\u636e\u5206\u533a\u52a0\u901f\u6570\u636e\u67e5\u8be2\uff0c\u901a\u8fc7Amazon EventBridge\u6bcf\u5929\u4f1a\u65b0\u5efa\u7b2c\u4e8c\u5929\u7684\u6240\u6709\u5206\u533a\uff0c\u5e76\u5220\u9664\u524d\u4e00\u5929\u7684\u5206\u533a\u3002Lambda\u51fd\u6570MetricCollector\u7528\u6765\u5206\u6790\u5b9e\u65f6\u65e5\u5fd7\u548c\u6536\u96c6\u76d1\u63a7\u6307\u6807\uff0c\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\u3002 \u5c06\u67e5\u8be2\u6570\u636e\u7684\u7ed3\u679c\u4fdd\u5b58\u5728DynamoDB\u4e2d\u65b9\u4fbf\u540e\u7eed\u83b7\u53d6 \u901a\u8fc7Amazon Athena\u67e5\u8be2\u51fa\u76f8\u5e94\u7684\u76d1\u63a7\u6307\u6807\u6570\u636e\uff0c\u4f8b\u5982\u901a\u8fc7\u5e26\u5bbd\u8ba1\u7b97\u7f13\u5b58\u547d\u4e2d\u7387(CHR)\u3001\u4e0b\u8f7d\u901f\u7387\uff0c\u6700\u7ec8\u5c06\u76d1\u63a7\u6307\u6807\u6570\u636e\u5b58\u50a8\u5728DynamoDB\u8868\u683c\u4e2d\u3002 \u6700\u7ec8\u7528\u6237\u63a5\u53e3\u4f7f\u7528API Gateway \u7528\u6237\u63a5\u53e3\u901a\u8fc7API Gateway\u548cLambda\u51fd\u6570MetricManager\u751f\u6210\u4e00\u4e2aRESTful API\uff0cMetricManager\u4f1a\u8bfb\u53d6DynamoDB\u8868\u683c\u4e2d\u7684\u76d1\u63a7\u6307\u6807\u5e76\u8fd4\u56de\u76f8\u5e94\u7ed3\u679c\u3002\u4e3a\u4e86\u8fdb\u4e00\u6b65\u52a0\u5f3a\u5b89\u5168\u7ba1\u7406\u9650\u5236API\u7684\u8bbf\u95ee\uff0cAPI Gateway\u4e2d\u5f00\u542fCognito\u6388\u6743\uff0c\u8bbf\u95ee\u63a5\u53e3\u7684\u7528\u6237\u9700\u643a\u5e26Cognito\u4ee4\u724c\u624d\u80fd\u6b63\u5e38\u8bf7\u6c42API\u3002","title":"\u67b6\u6784\u6982\u89c8"},{"location":"architecture/#lambdaedge-cloudfront-functions","text":"\u672c\u6a21\u5757\u5305\u542b\u591a\u4e2a\u53ef\u901a\u8fc7SAR (Serverless Application Repository)\u90e8\u7f72\u7684Lambda@Edge\u51fd\u6570\u548c\u901a\u8fc7CloudFormation\u90e8\u7f72\u7684CloudFront Functions\u3002","title":"Lambda@Edge &amp; CloudFront Functions\u5408\u96c6"},{"location":"architecture/#amazon-wafamazon-shieldcloudfront","text":"\u56fe2\uff1a\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316\u67b6\u6784 \u672c\u6a21\u5757\u901a\u8fc7CloudFormation\u6a21\u7248\u4f1a\u81ea\u52a8\u90e8\u7f72\u4e00\u7cfb\u5217\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u670d\u52a1\uff0c\u5176\u4e2d\u5305\u542bAmazon WAF\u3001Amazon Shield Advanced\u3001Amazon Lambda\u3001Amazon Athena\u3001Amazon API Gateway\u7b49\u3002 Shield Deployment Lambda\u51fd\u6570\uff1a\u81ea\u52a8\u90e8\u7f72Shield Advanced\u5b89\u5168\u7ec4\u548c\u88ab\u4fdd\u62a4\u8d44\u6e90\uff0c\u4ece\u800c\u9632\u5fa1DDoS\u653b\u51fb\u3002 Log Parser Lambda\u51fd\u6570\uff1a\u8c03\u7528Athena\u5bf9CloudFront\u6807\u51c6\u65e5\u5fd7\u548cWAF\u65e5\u5fd7\u8fdb\u884c\u67e5\u8be2\uff0c\u627e\u5230\u6307\u5b9a\u65f6\u95f4\u5185\u8d85\u8fc7\u9608\u503c\u7684IP\uff0c\u5c06\u5176\u66f4\u65b0\u5230WAF\u4e2d\uff0c\u4ece\u800c\u9632\u5fa1DDoS\u653b\u51fb\u3002 Badbot Parser Lambda\u51fd\u6570\uff1a\u5f53\u6709\u722c\u866b\u70b9\u51fb\u9677\u9631\u94fe\u63a5\u65f6\uff0c\u5c06\u5176IP\u66f4\u65b0\u5230WAF\u4e2d\uff0c\u4ece\u800c\u963b\u6b62\u722c\u866b\u7ee7\u7eed\u722c\u53d6\u7f51\u7ad9\u5185\u5bb9\u3002 IP List Parser Lambda\u51fd\u6570\uff1aCloudWatch\u4f1a\u5b9a\u65f6\u8c03\u7528\u6b64\u51fd\u6570\u4ece\u7b2c\u4e09\u65b9\u7f51\u7ad9\u66f4\u65b0\u6709\u98ce\u9669\u7684IP\u5217\u8868\u3002 \u81ea\u52a8\u90e8\u7f72\u7684WAF\u89c4\u5219\u4f1a\u5bf9SQL\u6ce8\u5165\u653b\u51fb\u548c\u8de8\u7ad9\u811a\u672c\u653b\u51fb\u8fdb\u884c\u9632\u5fa1\u3002","title":"\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316"},{"location":"architecture/#cloudfrontapi","text":"\u56fe3\uff1aCloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API\u67b6\u6784 \u672c\u6a21\u5757\u4e3b\u8981\u5b8c\u6210\u4ee5\u4e0b\u64cd\u4f5c\uff1a \u5f00\u542fCloudFront\u5b9e\u65f6\u65e5\u5fd7 \u5f00\u542f\u7684\u8fc7\u7a0b\u4e2d\u9700\u8981\u914d\u7f6e\u5bf9\u5e94\u7684Kinesis Data Stream\u6570\u636e\u6d41\u3002 \u8bbe\u7f6eKinesis Data Firehose\u5feb\u901f\u5b8c\u6210\u6570\u636e\u4f20\u8f93 CloudFront\u7684\u5b9e\u65f6\u65e5\u5fd7\u4f1a\u4f9d\u6b21\u901a\u8fc7Kinesis Data Stream\u548cKinesis Data Firehose\uff0c\u6700\u7ec8\u5b58\u50a8\u5230Amazon S3\u6876\u4e2d\u3002\u5728\u6b64\u8fc7\u7a0b\u4e2d\uff0cKinesis Data Firehose\u4f1a\u8c03\u7528Amazon Lambda\u51fd\u6570Log Transformer\u5b9e\u73b0\u901a\u8fc7\u5ba2\u6237\u7aefIP\u627e\u5230ISP\u548c\u56fd\u5bb6\u4ee3\u7801\uff0c\u4ece\u800c\u4ee5\u56fd\u5bb6\u4ee3\u7801\u548c\u8fd0\u8425\u5546\u4e3a\u5355\u4f4d\u5bf9\u4e0b\u8f7d\u901f\u7387\u6307\u6807\u8fdb\u884c\u5206\u7c7b\uff0c\u5e76\u914d\u5408Kinesis Data Firehose\u5b9e\u73b0\u52a8\u6001\u5206\u533a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5c06\u5b9e\u65f6\u65e5\u5fd7\u901a\u8fc7\u5206\u533a\u952e\u8fdb\u884c\u5206\u533a\uff0c\u5e76\u5b58\u50a8\u5230Amazon S3\u6876\u4e2d\uff0c\u5982year=2021/month=12/day=10\u3002 \u901a\u8fc7Athena\u67e5\u8be2S3\u4e2d\u7684\u5b9e\u65f6\u65e5\u5fd7 \u4e3a\u4e86\u8ba9Amazon Athena\u901a\u8fc7\u6570\u636e\u5206\u533a\u52a0\u901f\u6570\u636e\u67e5\u8be2\uff0c\u901a\u8fc7Amazon EventBridge\u6bcf\u5929\u4f1a\u65b0\u5efa\u7b2c\u4e8c\u5929\u7684\u6240\u6709\u5206\u533a\uff0c\u5e76\u5220\u9664\u524d\u4e00\u5929\u7684\u5206\u533a\u3002Lambda\u51fd\u6570MetricCollector\u7528\u6765\u5206\u6790\u5b9e\u65f6\u65e5\u5fd7\u548c\u6536\u96c6\u76d1\u63a7\u6307\u6807\uff0c\u6bcf5\u5206\u949f\u6267\u884c\u4e00\u6b21\u3002 \u5c06\u67e5\u8be2\u6570\u636e\u7684\u7ed3\u679c\u4fdd\u5b58\u5728DynamoDB\u4e2d\u65b9\u4fbf\u540e\u7eed\u83b7\u53d6 \u901a\u8fc7Amazon Athena\u67e5\u8be2\u51fa\u76f8\u5e94\u7684\u76d1\u63a7\u6307\u6807\u6570\u636e\uff0c\u4f8b\u5982\u901a\u8fc7\u5e26\u5bbd\u8ba1\u7b97\u7f13\u5b58\u547d\u4e2d\u7387(CHR)\u3001\u4e0b\u8f7d\u901f\u7387\uff0c\u6700\u7ec8\u5c06\u76d1\u63a7\u6307\u6807\u6570\u636e\u5b58\u50a8\u5728DynamoDB\u8868\u683c\u4e2d\u3002 \u6700\u7ec8\u7528\u6237\u63a5\u53e3\u4f7f\u7528API Gateway \u7528\u6237\u63a5\u53e3\u901a\u8fc7API Gateway\u548cLambda\u51fd\u6570MetricManager\u751f\u6210\u4e00\u4e2aRESTful API\uff0cMetricManager\u4f1a\u8bfb\u53d6DynamoDB\u8868\u683c\u4e2d\u7684\u76d1\u63a7\u6307\u6807\u5e76\u8fd4\u56de\u76f8\u5e94\u7ed3\u679c\u3002\u4e3a\u4e86\u8fdb\u4e00\u6b65\u52a0\u5f3a\u5b89\u5168\u7ba1\u7406\u9650\u5236API\u7684\u8bbf\u95ee\uff0cAPI Gateway\u4e2d\u5f00\u542fCognito\u6388\u6743\uff0c\u8bbf\u95ee\u63a5\u53e3\u7684\u7528\u6237\u9700\u643a\u5e26Cognito\u4ee4\u724c\u624d\u80fd\u6b63\u5e38\u8bf7\u6c42API\u3002","title":"CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API"},{"location":"cost/","text":"\u60a8\u9700\u8981\u627f\u62c5\u8fd0\u884c\u89e3\u51b3\u65b9\u6848\u65f6\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5404\u9879\u670d\u52a1\u7684\u6210\u672c\u8d39\u7528\u3002\u5efa\u8bae\u60a8\u901a\u8fc7 Amazon Web Services Cost Explorer \u521b\u5efa\u4f30\u7b97\uff0c\u8be6\u7ec6\u8d39\u7528\u4fe1\u606f\u8bf7\u53c2\u8003\u5404\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u670d\u52a1\u7684\u8d39\u7528\u9875\u9762\u3002 Lambda@Edge & CloudFront Functions\u5408\u96c6 Lambda@Edge & CloudFront Functions\u5408\u96c6\u7684\u6210\u672c\u8d39\u7528\u4e3b\u8981\u5305\u542b\u591a\u4e2aLambda@Edge\u51fd\u6570\u548cCloudFront Functions\u7684\u4f7f\u7528\u8d39\u7528\u3002 \u670d\u52a1 \u8d39\u7528 Lambda@Edge \u53c2\u8003\u94fe\u63a5 CloudFront Functions \u53c2\u8003\u94fe\u63a5 \u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316 \u622a\u81f32022\u5e742\u6708\uff0c\u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\uff08us-east-1\uff09\uff0c\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u8fd0\u884c\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316\u7528\u4e8e\u9632\u5fa1HTTP\u6cdb\u6d2a\u3001\u722c\u866b\u3001SQL\u6ce8\u5165\u548cXSS\u653b\u51fb\uff0c\u6210\u672c\u7ea6\u4e3a\u6bcf\u6708$22.84\u3002 \u670d\u52a1 \u7528\u91cf \u8d39\u7528/\u6708 Amazon Kinesis Data Firehose 100 GB $2.9 Amazon Lambda 1M\u6b21\u8bf7\u6c42 \u5e73\u5747500\u6beb\u79d2\u7684\u6267\u884c\u65f6\u95f4\u548c512MB\u5185\u5b58 $4.37 Amazon API Gateway 1M\u6b21\u8bf7\u6c42 ~$3.5 Amazon Athena 1M\u6b21\u67e5\u8be2 \u6bcf\u6b21\u67e5\u8be2\u626b\u63cf2GB\u6570\u636e $9.77 Amazon S3 100 GB $2.3 \u603b\u8ba1 $22.84 CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API \u622a\u81f32022\u5e742\u6708\uff0c\u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\uff08us-east-1\uff09\uff0c\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u8fd0\u884cCloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API\uff0c\u4e00\u4e2a\u6bcf\u79d2\u63a5\u653660\u4e2a2KB\u8bb0\u5f55\u7684CloudFront\u5206\u914d\uff0c\u4e3a\u5176\u76d1\u63a710\u4e2a\u6307\u6807\uff0c\u6210\u672c\u7ea6\u4e3a\u6bcf\u6708$88.56\u3002 Service Dimensions Cost/Month Amazon Kinesis Data Firehose 60\u4e2a\u8bb0\u5f55(2KB)/\u79d2 \u542f\u7528\u52a8\u6001\u5206\u533a $36.9 Amazon Kinesis Data Stream 1\u4e2a\u5206\u533a 60\u4e2a\u8bb0\u5f55(2KB)/\u79d2 \u6570\u636e\u4fdd\u7559168\u5c0f\u65f6 $27.76 Amazon Lambda 86K\u6b21\u8bf7\u6c42 \u5e73\u5747500\u6beb\u79d2\u7684\u6267\u884c\u65f6\u95f4\u548c512MB\u5185\u5b58 $0.38 Amazon API Gateway 86K\u6b21\u8bf7\u6c42 $0.09 Amazon Athena 86K\u6b21\u67e5\u8be2 \u6bcf\u6b21\u67e5\u8be2\u626b\u63cf35MB\u6570\u636e $14.42 Amazon Simple Storage Service (S3) 295GB $6.79 Amazon Cognito 30 MAU $1.5 Amazon DynamoDB 1GB\u6570\u636e\u5b58\u50a8 \u6bcf\u5206\u949f2\u6b21\u5199\u64cd\u4f5c \u6bcf\u4e24\u5206\u949f1\u6b21\u8bfb\u64cd\u4f5c $0.72 Total $88.56","title":"\u6210\u672c\u9884\u4f30"},{"location":"cost/#lambdaedge-cloudfront-functions","text":"Lambda@Edge & CloudFront Functions\u5408\u96c6\u7684\u6210\u672c\u8d39\u7528\u4e3b\u8981\u5305\u542b\u591a\u4e2aLambda@Edge\u51fd\u6570\u548cCloudFront Functions\u7684\u4f7f\u7528\u8d39\u7528\u3002 \u670d\u52a1 \u8d39\u7528 Lambda@Edge \u53c2\u8003\u94fe\u63a5 CloudFront Functions \u53c2\u8003\u94fe\u63a5","title":"Lambda@Edge &amp; CloudFront Functions\u5408\u96c6"},{"location":"cost/#amazon-wafamazon-shieldcloudfront","text":"\u622a\u81f32022\u5e742\u6708\uff0c\u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\uff08us-east-1\uff09\uff0c\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u8fd0\u884c\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316\u7528\u4e8e\u9632\u5fa1HTTP\u6cdb\u6d2a\u3001\u722c\u866b\u3001SQL\u6ce8\u5165\u548cXSS\u653b\u51fb\uff0c\u6210\u672c\u7ea6\u4e3a\u6bcf\u6708$22.84\u3002 \u670d\u52a1 \u7528\u91cf \u8d39\u7528/\u6708 Amazon Kinesis Data Firehose 100 GB $2.9 Amazon Lambda 1M\u6b21\u8bf7\u6c42 \u5e73\u5747500\u6beb\u79d2\u7684\u6267\u884c\u65f6\u95f4\u548c512MB\u5185\u5b58 $4.37 Amazon API Gateway 1M\u6b21\u8bf7\u6c42 ~$3.5 Amazon Athena 1M\u6b21\u67e5\u8be2 \u6bcf\u6b21\u67e5\u8be2\u626b\u63cf2GB\u6570\u636e $9.77 Amazon S3 100 GB $2.3 \u603b\u8ba1 $22.84","title":"\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316"},{"location":"cost/#cloudfrontapi","text":"\u622a\u81f32022\u5e742\u6708\uff0c\u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\uff08us-east-1\uff09\uff0c\u4f7f\u7528\u9ed8\u8ba4\u8bbe\u7f6e\u8fd0\u884cCloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API\uff0c\u4e00\u4e2a\u6bcf\u79d2\u63a5\u653660\u4e2a2KB\u8bb0\u5f55\u7684CloudFront\u5206\u914d\uff0c\u4e3a\u5176\u76d1\u63a710\u4e2a\u6307\u6807\uff0c\u6210\u672c\u7ea6\u4e3a\u6bcf\u6708$88.56\u3002 Service Dimensions Cost/Month Amazon Kinesis Data Firehose 60\u4e2a\u8bb0\u5f55(2KB)/\u79d2 \u542f\u7528\u52a8\u6001\u5206\u533a $36.9 Amazon Kinesis Data Stream 1\u4e2a\u5206\u533a 60\u4e2a\u8bb0\u5f55(2KB)/\u79d2 \u6570\u636e\u4fdd\u7559168\u5c0f\u65f6 $27.76 Amazon Lambda 86K\u6b21\u8bf7\u6c42 \u5e73\u5747500\u6beb\u79d2\u7684\u6267\u884c\u65f6\u95f4\u548c512MB\u5185\u5b58 $0.38 Amazon API Gateway 86K\u6b21\u8bf7\u6c42 $0.09 Amazon Athena 86K\u6b21\u67e5\u8be2 \u6bcf\u6b21\u67e5\u8be2\u626b\u63cf35MB\u6570\u636e $14.42 Amazon Simple Storage Service (S3) 295GB $6.79 Amazon Cognito 30 MAU $1.5 Amazon DynamoDB 1GB\u6570\u636e\u5b58\u50a8 \u6bcf\u5206\u949f2\u6b21\u5199\u64cd\u4f5c \u6bcf\u4e24\u5206\u949f1\u6b21\u8bfb\u64cd\u4f5c $0.72 Total $88.56","title":"CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API"},{"location":"deployment/","text":"\u5728\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u5efa\u8bae\u60a8\u5148\u67e5\u770b\u672c\u6307\u5357\u4e2d\u6709\u5173\u67b6\u6784\u56fe\u548c\u533a\u57df\u652f\u6301\u7b49\u4fe1\u606f\u3002\u7136\u540e\u6309\u7167\u4e0b\u9762\u7684\u8bf4\u660e\u914d\u7f6e\u89e3\u51b3\u65b9\u6848\u5e76\u5c06\u5176\u90e8\u7f72\u5230\u60a8\u7684\u5e10\u6237\u4e2d\u3002 Lambda@Edge & CloudFront Functions\u5408\u96c6 \u90e8\u7f72\u65f6\u95f4\uff1a\u7ea63\u5206\u949f \u90e8\u7f72\u6982\u8ff0 \u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u8868\u4e2d\u7684\u90e8\u7f72\u94fe\u63a5\u8fdb\u884c\u90e8\u7f72\u3002\u5bf9\u4e8eLambda@Edge\u51fd\u6570\uff0c\u60a8\u4e5f\u53ef\u901a\u8fc7\u5728SAR (Serverless Application Repository)\u4e2d\u641c\u7d22\u5173\u952e\u5b57aws-cloudfront-extensions\u8fdb\u884c\u90e8\u7f72\u3002 \u6709\u5173Lambda@Edge\u548cCloudFront Functions\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53ef\u53c2\u8003 \u6982\u8ff0 \u3002 Lambda@Edge \u540d\u79f0 \u90e8\u7f72\u94fe\u63a5 Authentication with Cognito Add security headers Serve content based on device type Cross origin resource sharing Modify response status code Modify response header Access origin by weight rate Failover to alternative origin Support 302 from origin Pre-warm Resize picture Anti-hotlinking Standardize query string Authentication with Alibaba Cloud Rewrite host for custom origin Serverless load balancer Custom response with new URL CloudFront Functions \u540d\u79f0 \u90e8\u7f72\u94fe\u63a5 Add security headers Cross origin resource sharing Add cache control headers Add origin headers Add true client IP headers Redirect based on country Default dir index Verify JSON web token Customize request host \u5728SAR\u4e2d\u90e8\u7f72Lambda@Edge \u5728\u63a7\u5236\u53f0\u4e2d\u6253\u5f00 Amazon Serverless Application Repository\u9875\u9762 \u3002 \u52fe\u9009 \u663e\u793a\u7528\u4e8e\u521b\u5efa\u81ea\u5b9a\u4e49 IAM \u89d2\u8272\u6216\u8d44\u6e90\u7b56\u7565\u7684\u5e94\u7528\u7a0b\u5e8f \u3002 \u641c\u7d22 aws-cloudfront-extensions \uff0c\u5c06\u663e\u793a\u6240\u6709\u6269\u5c55\uff0c\u9009\u62e9\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff08\u4f8b\u5982\uff0cserving-based-on-device\uff09\u5e76\u5355\u51fb \u90e8\u7f72 \u3002 \u5728\u5e94\u7528\u8be6\u60c5\u9875\u9762\uff0c\u52fe\u9009 \u6211\u786e\u8ba4\u6b64\u5e94\u7528\u7a0b\u5e8f\u5c06\u521b\u5efa\u81ea\u5b9a\u4e49 IAM \u89d2\u8272\u548c\u8d44\u6e90\u7b56\u7565 \u3002 \u9009\u62e9 \u90e8\u7f72 \u3002\u90e8\u7f72\u5b8c\u6210\u540e\u4f1a\u91cd\u5b9a\u5411\u5230Lambda\u5e94\u7528\u9875\u9762\uff0c\u60a8\u53ef\u4ee5\u5c06\u5176\u90e8\u7f72\u5230Lambda@Edge\u3002 \u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316 \u90e8\u7f72\u65f6\u95f4\uff1a\u7ea615\u5206\u949f \u90e8\u7f72\u6982\u8ff0 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728Amazon Web Service\u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u5728\u60a8\u7684Amazon Web Service\u5e10\u6237\u4e2d\u542f\u52a8CloudFormation\u6a21\u677f\u3002 \u67e5\u770b\u6a21\u677f\u53c2\u6570\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u8fdb\u884c\u8c03\u6574\u3002 \u90e8\u7f72\u6b65\u9aa4 \u767b\u5f55\u5230Amazon Web Services\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8\u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5 \u4e0b\u8f7d\u6a21\u677f \u8fdb\u884c\u90e8\u7f72\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u6a21\u677f\u5c06\u5728\u60a8\u767b\u5f55\u63a7\u5236\u53f0\u540e\u9ed8\u8ba4\u7684\u533a\u57df\u542f\u52a8\uff0c\u5373\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\u3002\u82e5\u9700\u5728\u6307\u5b9a\u7684\u533a\u57df\u4e2d\u542f\u52a8\u8be5\u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u5728\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e WAFBlockPeriod 240 \u963b\u6b62\u6307\u5b9aIP\u5730\u5740\u8bbf\u95ee\u7684\u65f6\u95f4\uff0c\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\u3002 WAFScope CLOUDFRONT \u6307\u5b9aWAF\u662f\u5426\u914d\u7f6e\u5728CloudFront\u3002 appAccessLogBucket access-log-bucket-cloudfront \u5b58\u50a8CloudFront\u8bbf\u95ee\u65e5\u5fd7\u7684S3\u5b58\u50a8\u6876\u540d\u79f0\u3002 errorThreshold 50 \u6bcf\u5206\u949f\u5141\u8bb8\u7684\u9519\u8bef\u6570\u91cf\u3002 requestThreshold 100 \u6bcf\u4e2aIP\u5730\u5740\u6bcf\u4e94\u5206\u949f\u53ef\u63a5\u53d7\u7684\u6700\u5927\u8bf7\u6c42\u6570\u3002 wafLogBucketName waf-log-bucket-cloudfront \u5b58\u50a8WAF\u65e5\u5fd7\u7684S3\u5b58\u50a8\u6876\u7684\u540d\u79f0\u3002 !!! note \"\u8bf4\u660e\" \u5982\u679cWAFScope\u53d6\u9ed8\u8ba4\u503cCLOUDFRONT\uff0c\u60a8\u5fc5\u987b\u9009\u62e9\u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\uff08us-east-1\uff09\u521b\u5efaWAFv2\u8d44\u6e90\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u60a8\u53ef\u4ee5\u4e3a\u5806\u6808\u4e2d\u7684\u8d44\u6e90\u6307\u5b9a\u6807\u7b7e\uff08\u952e\u503c\u5bf9\uff09\u5e76\u8bbe\u7f6e\u5176\u4ed6\u9009\u9879\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u786e\u4fdd\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u5c06\u521b\u5efaAmazon Identity and Access Management\uff08IAM\uff09\u8d44\u6e90\u7684\u590d\u9009\u6846\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u4ee5\u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728Amazon CloudFormation\u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5927\u7ea615\u5206\u949f\u5185\u53ef\u4ee5\u770b\u5230\u72b6\u6001\u4e3a CREATE_COMPLETE \u3002 \u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9 \u8f93\u51fa \u6807\u7b7e\u9875\u67e5\u770b\u5806\u6808\u8d44\u6e90\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API \u90e8\u7f72\u65f6\u95f4\uff1a\u7ea615\u5206\u949f \u90e8\u7f72\u6982\u8ff0 \u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728Amazon Web Service\u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u5728\u60a8\u7684Amazon Web Service\u5e10\u6237\u4e2d\u542f\u52a8CloudFormation\u6a21\u677f\u3002 \u67e5\u770b\u6a21\u677f\u53c2\u6570\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u8fdb\u884c\u8c03\u6574\u3002 \u90e8\u7f72\u6b65\u9aa4 \u767b\u5f55\u5230Amazon Web Services\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8\u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5 \u4e0b\u8f7d\u6a21\u677f \u8fdb\u884c\u90e8\u7f72\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u6a21\u677f\u5c06\u5728\u60a8\u767b\u5f55\u63a7\u5236\u53f0\u540e\u9ed8\u8ba4\u7684\u533a\u57df\u542f\u52a8\uff0c\u5373\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\u3002\u82e5\u9700\u5728\u6307\u5b9a\u7684\u533a\u57df\u4e2d\u542f\u52a8\u8be5\u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u5728\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e CloudFrontDomainList - \u9700\u8981\u83b7\u53d6\u76d1\u63a7\u6307\u6807\u7684CloudFront\u57df\u540d\u5217\u8868\uff0c\u82e5\u6709\u591a\u4e2a\u57df\u540d\uff0c\u4e2d\u95f4\u4ee5\u9017\u53f7\u5206\u9694\u3002 CloudFrontLogKeepDays 120 Amazon S3\u6876\u4e2d\u4fdd\u5b58CloudFront\u5b9e\u65f6\u65e5\u5fd7\u7684\u5929\u6570\u3002 deployStage prod API Gateway\u90e8\u7f72\u9636\u6bb5\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u60a8\u53ef\u4ee5\u4e3a\u5806\u6808\u4e2d\u7684\u8d44\u6e90\u6307\u5b9a\u6807\u7b7e\uff08\u952e\u503c\u5bf9\uff09\u5e76\u8bbe\u7f6e\u5176\u4ed6\u9009\u9879\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u786e\u4fdd\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u5c06\u521b\u5efaAmazon Identity and Access Management\uff08IAM\uff09\u8d44\u6e90\u7684\u590d\u9009\u6846\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u4ee5\u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728Amazon CloudFormation\u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5927\u7ea615\u5206\u949f\u5185\u53ef\u4ee5\u770b\u5230\u72b6\u6001\u4e3a CREATE_COMPLETE \u3002 \u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9 \u8f93\u51fa \u6807\u7b7e\u9875\u67e5\u770b\u5806\u6808\u8d44\u6e90\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u8003 \u535a\u5ba2 \u3002","title":"\u90e8\u7f72\u89e3\u51b3\u65b9\u6848"},{"location":"deployment/#lambdaedge-cloudfront-functions","text":"\u90e8\u7f72\u65f6\u95f4\uff1a\u7ea63\u5206\u949f","title":"Lambda@Edge &amp; CloudFront Functions\u5408\u96c6"},{"location":"deployment/#_1","text":"\u60a8\u53ef\u4ee5\u70b9\u51fb\u4e0b\u8868\u4e2d\u7684\u90e8\u7f72\u94fe\u63a5\u8fdb\u884c\u90e8\u7f72\u3002\u5bf9\u4e8eLambda@Edge\u51fd\u6570\uff0c\u60a8\u4e5f\u53ef\u901a\u8fc7\u5728SAR (Serverless Application Repository)\u4e2d\u641c\u7d22\u5173\u952e\u5b57aws-cloudfront-extensions\u8fdb\u884c\u90e8\u7f72\u3002 \u6709\u5173Lambda@Edge\u548cCloudFront Functions\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u53ef\u53c2\u8003 \u6982\u8ff0 \u3002","title":"\u90e8\u7f72\u6982\u8ff0"},{"location":"deployment/#lambdaedge","text":"\u540d\u79f0 \u90e8\u7f72\u94fe\u63a5 Authentication with Cognito Add security headers Serve content based on device type Cross origin resource sharing Modify response status code Modify response header Access origin by weight rate Failover to alternative origin Support 302 from origin Pre-warm Resize picture Anti-hotlinking Standardize query string Authentication with Alibaba Cloud Rewrite host for custom origin Serverless load balancer Custom response with new URL","title":"Lambda@Edge"},{"location":"deployment/#cloudfront-functions","text":"\u540d\u79f0 \u90e8\u7f72\u94fe\u63a5 Add security headers Cross origin resource sharing Add cache control headers Add origin headers Add true client IP headers Redirect based on country Default dir index Verify JSON web token Customize request host","title":"CloudFront Functions"},{"location":"deployment/#sarlambdaedge","text":"\u5728\u63a7\u5236\u53f0\u4e2d\u6253\u5f00 Amazon Serverless Application Repository\u9875\u9762 \u3002 \u52fe\u9009 \u663e\u793a\u7528\u4e8e\u521b\u5efa\u81ea\u5b9a\u4e49 IAM \u89d2\u8272\u6216\u8d44\u6e90\u7b56\u7565\u7684\u5e94\u7528\u7a0b\u5e8f \u3002 \u641c\u7d22 aws-cloudfront-extensions \uff0c\u5c06\u663e\u793a\u6240\u6709\u6269\u5c55\uff0c\u9009\u62e9\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\uff08\u4f8b\u5982\uff0cserving-based-on-device\uff09\u5e76\u5355\u51fb \u90e8\u7f72 \u3002 \u5728\u5e94\u7528\u8be6\u60c5\u9875\u9762\uff0c\u52fe\u9009 \u6211\u786e\u8ba4\u6b64\u5e94\u7528\u7a0b\u5e8f\u5c06\u521b\u5efa\u81ea\u5b9a\u4e49 IAM \u89d2\u8272\u548c\u8d44\u6e90\u7b56\u7565 \u3002 \u9009\u62e9 \u90e8\u7f72 \u3002\u90e8\u7f72\u5b8c\u6210\u540e\u4f1a\u91cd\u5b9a\u5411\u5230Lambda\u5e94\u7528\u9875\u9762\uff0c\u60a8\u53ef\u4ee5\u5c06\u5176\u90e8\u7f72\u5230Lambda@Edge\u3002","title":"\u5728SAR\u4e2d\u90e8\u7f72Lambda@Edge"},{"location":"deployment/#amazon-wafamazon-shieldcloudfront","text":"\u90e8\u7f72\u65f6\u95f4\uff1a\u7ea615\u5206\u949f","title":"\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316"},{"location":"deployment/#_2","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728Amazon Web Service\u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u5728\u60a8\u7684Amazon Web Service\u5e10\u6237\u4e2d\u542f\u52a8CloudFormation\u6a21\u677f\u3002 \u67e5\u770b\u6a21\u677f\u53c2\u6570\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u8fdb\u884c\u8c03\u6574\u3002","title":"\u90e8\u7f72\u6982\u8ff0"},{"location":"deployment/#_3","text":"\u767b\u5f55\u5230Amazon Web Services\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8\u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5 \u4e0b\u8f7d\u6a21\u677f \u8fdb\u884c\u90e8\u7f72\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u6a21\u677f\u5c06\u5728\u60a8\u767b\u5f55\u63a7\u5236\u53f0\u540e\u9ed8\u8ba4\u7684\u533a\u57df\u542f\u52a8\uff0c\u5373\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\u3002\u82e5\u9700\u5728\u6307\u5b9a\u7684\u533a\u57df\u4e2d\u542f\u52a8\u8be5\u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u5728\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e WAFBlockPeriod 240 \u963b\u6b62\u6307\u5b9aIP\u5730\u5740\u8bbf\u95ee\u7684\u65f6\u95f4\uff0c\u4ee5\u5206\u949f\u4e3a\u5355\u4f4d\u3002 WAFScope CLOUDFRONT \u6307\u5b9aWAF\u662f\u5426\u914d\u7f6e\u5728CloudFront\u3002 appAccessLogBucket access-log-bucket-cloudfront \u5b58\u50a8CloudFront\u8bbf\u95ee\u65e5\u5fd7\u7684S3\u5b58\u50a8\u6876\u540d\u79f0\u3002 errorThreshold 50 \u6bcf\u5206\u949f\u5141\u8bb8\u7684\u9519\u8bef\u6570\u91cf\u3002 requestThreshold 100 \u6bcf\u4e2aIP\u5730\u5740\u6bcf\u4e94\u5206\u949f\u53ef\u63a5\u53d7\u7684\u6700\u5927\u8bf7\u6c42\u6570\u3002 wafLogBucketName waf-log-bucket-cloudfront \u5b58\u50a8WAF\u65e5\u5fd7\u7684S3\u5b58\u50a8\u6876\u7684\u540d\u79f0\u3002 !!! note \"\u8bf4\u660e\" \u5982\u679cWAFScope\u53d6\u9ed8\u8ba4\u503cCLOUDFRONT\uff0c\u60a8\u5fc5\u987b\u9009\u62e9\u5728\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\uff08us-east-1\uff09\u521b\u5efaWAFv2\u8d44\u6e90\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u60a8\u53ef\u4ee5\u4e3a\u5806\u6808\u4e2d\u7684\u8d44\u6e90\u6307\u5b9a\u6807\u7b7e\uff08\u952e\u503c\u5bf9\uff09\u5e76\u8bbe\u7f6e\u5176\u4ed6\u9009\u9879\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u786e\u4fdd\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u5c06\u521b\u5efaAmazon Identity and Access Management\uff08IAM\uff09\u8d44\u6e90\u7684\u590d\u9009\u6846\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u4ee5\u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728Amazon CloudFormation\u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5927\u7ea615\u5206\u949f\u5185\u53ef\u4ee5\u770b\u5230\u72b6\u6001\u4e3a CREATE_COMPLETE \u3002 \u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9 \u8f93\u51fa \u6807\u7b7e\u9875\u67e5\u770b\u5806\u6808\u8d44\u6e90\u7684\u8be6\u7ec6\u4fe1\u606f\u3002","title":"\u90e8\u7f72\u6b65\u9aa4"},{"location":"deployment/#cloudfrontapi","text":"\u90e8\u7f72\u65f6\u95f4\uff1a\u7ea615\u5206\u949f","title":"CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API"},{"location":"deployment/#_4","text":"\u4f7f\u7528\u4ee5\u4e0b\u6b65\u9aa4\u5728Amazon Web Service\u4e0a\u90e8\u7f72\u6b64\u89e3\u51b3\u65b9\u6848\u3002 \u5728\u60a8\u7684Amazon Web Service\u5e10\u6237\u4e2d\u542f\u52a8CloudFormation\u6a21\u677f\u3002 \u67e5\u770b\u6a21\u677f\u53c2\u6570\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u8fdb\u884c\u8c03\u6574\u3002","title":"\u90e8\u7f72\u6982\u8ff0"},{"location":"deployment/#_5","text":"\u767b\u5f55\u5230Amazon Web Services\u7ba1\u7406\u63a7\u5236\u53f0\uff0c\u9009\u62e9\u6309\u94ae\u4ee5\u542f\u52a8\u6a21\u677f\u3002\u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9\u76f4\u63a5 \u4e0b\u8f7d\u6a21\u677f \u8fdb\u884c\u90e8\u7f72\u3002 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u8be5\u6a21\u677f\u5c06\u5728\u60a8\u767b\u5f55\u63a7\u5236\u53f0\u540e\u9ed8\u8ba4\u7684\u533a\u57df\u542f\u52a8\uff0c\u5373\u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df\u3002\u82e5\u9700\u5728\u6307\u5b9a\u7684\u533a\u57df\u4e2d\u542f\u52a8\u8be5\u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u5728\u63a7\u5236\u53f0\u5bfc\u822a\u680f\u4e2d\u7684\u533a\u57df\u4e0b\u62c9\u5217\u8868\u4e2d\u9009\u62e9\u3002 \u5728 \u53c2\u6570 \u90e8\u5206\uff0c\u67e5\u770b\u6a21\u677f\u7684\u53c2\u6570\uff0c\u5e76\u6839\u636e\u9700\u8981\u8fdb\u884c\u4fee\u6539\u3002 \u53c2\u6570 \u9ed8\u8ba4\u503c \u8bf4\u660e CloudFrontDomainList - \u9700\u8981\u83b7\u53d6\u76d1\u63a7\u6307\u6807\u7684CloudFront\u57df\u540d\u5217\u8868\uff0c\u82e5\u6709\u591a\u4e2a\u57df\u540d\uff0c\u4e2d\u95f4\u4ee5\u9017\u53f7\u5206\u9694\u3002 CloudFrontLogKeepDays 120 Amazon S3\u6876\u4e2d\u4fdd\u5b58CloudFront\u5b9e\u65f6\u65e5\u5fd7\u7684\u5929\u6570\u3002 deployStage prod API Gateway\u90e8\u7f72\u9636\u6bb5\u3002 \u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u914d\u7f6e\u5806\u6808\u9009\u9879 \u9875\u9762\u4e0a\uff0c\u60a8\u53ef\u4ee5\u4e3a\u5806\u6808\u4e2d\u7684\u8d44\u6e90\u6307\u5b9a\u6807\u7b7e\uff08\u952e\u503c\u5bf9\uff09\u5e76\u8bbe\u7f6e\u5176\u4ed6\u9009\u9879\uff0c\u7136\u540e\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u5728 \u5ba1\u6838 \u9875\u9762\uff0c\u67e5\u770b\u5e76\u786e\u8ba4\u8bbe\u7f6e\u3002\u786e\u4fdd\u9009\u4e2d\u786e\u8ba4\u6a21\u677f\u5c06\u521b\u5efaAmazon Identity and Access Management\uff08IAM\uff09\u8d44\u6e90\u7684\u590d\u9009\u6846\u3002\u9009\u62e9 \u4e0b\u4e00\u6b65 \u3002 \u9009\u62e9 \u521b\u5efa\u5806\u6808 \u4ee5\u90e8\u7f72\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u5728Amazon CloudFormation\u63a7\u5236\u53f0\u7684 \u72b6\u6001 \u5217\u4e2d\u67e5\u770b\u5806\u6808\u7684\u72b6\u6001\u3002\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u5927\u7ea615\u5206\u949f\u5185\u53ef\u4ee5\u770b\u5230\u72b6\u6001\u4e3a CREATE_COMPLETE \u3002 \u60a8\u8fd8\u53ef\u4ee5\u9009\u62e9 \u8f93\u51fa \u6807\u7b7e\u9875\u67e5\u770b\u5806\u6808\u8d44\u6e90\u7684\u8be6\u7ec6\u4fe1\u606f\u3002 \u66f4\u591a\u4fe1\u606f\u8bf7\u53c2\u8003 \u535a\u5ba2 \u3002","title":"\u90e8\u7f72\u6b65\u9aa4"},{"location":"regions/","text":"\u622a\u81f32022\u5e742\u6708\uff0c\u672c\u89e3\u51b3\u65b9\u6848\u652f\u6301\u90e8\u7f72\u5728\u4ee5\u4e0b\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u533a\u57df\uff1a \u533a\u57df\u540d\u79f0 \u533a\u57dfID \u7f8e\u56fd\u4e1c\u90e8\uff08\u5f17\u5409\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df us-east-1 \u7f8e\u56fd\u4e1c\u90e8\uff08\u4fc4\u4ea5\u4fc4\uff09\u533a\u57df us-east-2 \u7f8e\u56fd\u897f\u90e8\uff08\u52a0\u5229\u798f\u5c3c\u4e9a\u5317\u90e8\uff09\u533a\u57df us-west-1 \u7f8e\u56fd\u897f\u90e8\uff08\u4fc4\u52d2\u5188\uff09\u533a\u57df us-west-2 \u4e9a\u592a\u5730\u533a\uff08\u5b5f\u4e70\uff09\u533a\u57df ap-south-1 \u4e9a\u592a\u5730\u533a\uff08\u4e1c\u4eac\uff09\u533a\u57df ap-northeast-1 \u4e9a\u592a\u5730\u533a\uff08\u9996\u5c14\uff09\u533a\u57df ap-northeast-2 \u4e9a\u592a\u5730\u533a\uff08\u65b0\u52a0\u5761\uff09\u533a\u57df ap-southeast-1 \u4e9a\u592a\u5730\u533a\uff08\u6089\u5c3c\uff09\u533a\u57df ap-southeast-2 \u4e9a\u592a\u5730\u533a\uff08\u9999\u6e2f\uff09\u533a\u57df ap-east-1 \u52a0\u62ff\u5927\uff08\u4e2d\u90e8\uff09\u533a\u57df ca-central-1 \u6b27\u6d32\uff08\u7231\u5c14\u5170\uff09\u533a\u57df eu-west-1 \u6b27\u6d32\uff08\u4f26\u6566\uff09\u533a\u57df eu-west-2 \u6b27\u6d32\uff08\u5df4\u9ece\uff09\u533a\u57df eu-west-3 \u6b27\u6d32\uff08\u7c73\u5170\uff09\u533a\u57df eu-north-1 \u6b27\u6d32\uff08\u6cd5\u5170\u514b\u798f\uff09\u533a\u57df eu-central-1 \u5357\u7f8e\u6d32\uff08\u5723\u4fdd\u7f57\uff09\u533a\u57df sa-east-1","title":"\u533a\u57df\u652f\u6301"},{"location":"revisions/","text":"\u65e5\u671f \u7248\u672c\u53d1\u5e03\u8bf4\u660e 2021\u5e743\u6708 \u9996\u6b21\u53d1\u5e03\u7248\u672c1.0.0 2021\u5e747\u6708 \u53d1\u5e03\u7248\u672c1.1.0 1. \u65b0\u589e12\u4e2aLambda@Edge\u51fd\u6570\u548c9\u4e2aCloudFront Functions 2. \u65b0\u589e\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316 2021\u5e7412\u6708 \u53d1\u5e03\u7248\u672c1.2.0 \u65b0\u589e10\u4e2aLambda@Edge\u51fd\u6570\u548c2\u4e2aCloudFront Functions 2022\u5e742\u6708 \u53d1\u5e03\u7248\u672c1.3.0 \u65b0\u589e\u76d1\u63a7\u6307\u6807API","title":"\u6587\u6863\u53d1\u5e03\u8bf4\u660e"},{"location":"security/","text":"\u5f53\u60a8\u5728\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u57fa\u7840\u8bbe\u65bd\u4e0a\u6784\u5efa\u89e3\u51b3\u65b9\u6848\u65f6\uff0c\u5b89\u5168\u8d23\u4efb\u7531\u60a8\u548c\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5171\u540c\u627f\u62c5\u3002\u6b64 \u5171\u4eab\u6a21\u578b \u51cf\u5c11\u4e86\u60a8\u7684\u64cd\u4f5c\u8d1f\u62c5\uff0c\u8fd9\u662f\u7531\u4e8e\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u64cd\u4f5c\u3001\u7ba1\u7406\u548c\u63a7\u5236\u7ec4\u4ef6\uff0c\u5305\u62ec\u4e3b\u673a\u64cd\u4f5c\u7cfb\u7edf\u3001\u865a\u62df\u5316\u5c42\u4ee5\u53ca\u670d\u52a1\u8fd0\u884c\u6240\u5728\u8bbe\u65bd\u7684\u7269\u7406\u5b89\u5168\u6027\u3002\u6709\u5173\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u5b89\u5168\u7684\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u8bbf\u95ee\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280 \u4e91\u5b89\u5168 \u3002 IAM\u89d2\u8272 \u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u8eab\u4efd\u548c\u8bbf\u95ee\u7ba1\u7406\uff08IAM\uff09\u89d2\u8272\u5141\u8bb8\u5ba2\u6237\u4e3a\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e0a\u7684\u670d\u52a1\u548c\u7528\u6237\u5206\u914d\u7ec6\u7c92\u5ea6\u8bbf\u95ee\u7b56\u7565\u548c\u6743\u9650\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u521b\u5efaIAM\u89d2\u8272\uff0c\u8fd9\u4e9b\u89d2\u8272\u6388\u4e88\u89e3\u51b3\u65b9\u6848\u5404\u7ec4\u4ef6\u95f4\u7684\u8bbf\u95ee\u6743\u9650\u3002","title":"\u5b89\u5168\u4fe1\u606f"},{"location":"security/#iam","text":"\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u8eab\u4efd\u548c\u8bbf\u95ee\u7ba1\u7406\uff08IAM\uff09\u89d2\u8272\u5141\u8bb8\u5ba2\u6237\u4e3a\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u4e0a\u7684\u670d\u52a1\u548c\u7528\u6237\u5206\u914d\u7ec6\u7c92\u5ea6\u8bbf\u95ee\u7b56\u7565\u548c\u6743\u9650\u3002\u6b64\u89e3\u51b3\u65b9\u6848\u521b\u5efaIAM\u89d2\u8272\uff0c\u8fd9\u4e9b\u89d2\u8272\u6388\u4e88\u89e3\u51b3\u65b9\u6848\u5404\u7ec4\u4ef6\u95f4\u7684\u8bbf\u95ee\u6743\u9650\u3002","title":"IAM\u89d2\u8272"},{"location":"source/","text":"\u8bbf\u95ee\u6211\u4eec\u7684 GitHub\u5b58\u50a8\u5e93 \uff0c\u4e0b\u8f7d\u6b64\u89e3\u51b3\u65b9\u6848\u7684\u6e90\u6587\u4ef6\u3002CloudFront Extensions\u89e3\u51b3\u65b9\u6848\u7684\u6a21\u677f\u662f\u4f7f\u7528 \u4e91\u5f00\u53d1\u5de5\u5177\u5305\uff08CDK\uff09 \u751f\u6210\u7684\u3002\u6709\u5173\u66f4\u591a\u4fe1\u606f\uff0c\u8bf7\u53c2\u9605README.md\u6587\u4ef6\u3002","title":"\u6e90\u4ee3\u7801"},{"location":"template/","text":"\u90e8\u7f72\u89e3\u51b3\u65b9\u6848\u4e4b\u524d\uff0c\u60a8\u53ef\u4ee5\u4e0b\u8f7d\u89e3\u51b3\u65b9\u6848\u4f7f\u7528\u7684\u4ee5\u4e0b\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280CloudFormation\u6a21\u677f\u3002 \u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316 AwsCloudfrontWafStack.template : \u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u6a21\u677f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6\u3002\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b9a\u5236\u6a21\u677f\u3002 CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API CloudFrontMonitoringStack.template : \u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u6a21\u677f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6\u3002\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b9a\u5236\u6a21\u677f\u3002","title":"\u6a21\u677f\u4fe1\u606f"},{"location":"template/#amazon-wafamazon-shieldcloudfront","text":"AwsCloudfrontWafStack.template : \u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u6a21\u677f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6\u3002\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b9a\u5236\u6a21\u677f\u3002","title":"\u57fa\u4e8eAmazon WAF\u4e0eAmazon Shield\u7684CloudFront\u5b89\u5168\u81ea\u52a8\u5316"},{"location":"template/#cloudfrontapi","text":"CloudFrontMonitoringStack.template : \u60a8\u53ef\u4ee5\u4f7f\u7528\u8be5\u6a21\u677f\u542f\u52a8\u89e3\u51b3\u65b9\u6848\u4ee5\u53ca\u76f8\u5173\u7ec4\u4ef6\u3002\u60a8\u8fd8\u53ef\u4ee5\u6839\u636e\u9700\u8981\u5b9a\u5236\u6a21\u677f\u3002","title":"CloudFront\u5b9e\u65f6\u65e5\u5fd7\u76d1\u63a7API"},{"location":"uninstall/","text":"\u8981\u5378\u8f7dCloudFront Extensions\u89e3\u51b3\u65b9\u6848\uff0c\u8bf7\u5220\u9664CloudFormation\u5806\u6808\u3002 \u60a8\u53ef\u4ee5\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u7ba1\u7406\u63a7\u5236\u53f0\u6216CLI\u5220\u9664CloudFormation\u5806\u6808\u3002 \u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u7ba1\u7406\u63a7\u5236\u53f0\u5220\u9664\u5806\u6808 \u767b\u5f55 Amazon CloudFormation \u63a7\u5236\u53f0\u3002 \u9009\u62e9\u6b64\u89e3\u51b3\u65b9\u6848\u7684\u5b89\u88c5\u5806\u6808\u3002 \u70b9\u51fb \u5220\u9664 \u6309\u94ae\u3002 \u4f7f\u7528CLI\u5220\u9664\u5806\u6808 \u786e\u5b9a\u547d\u4ee4\u884c\u5728\u60a8\u7684\u73af\u5883\u4e2d\u662f\u5426\u53ef\u7528\u3002\u6709\u5173\u5b89\u88c5\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605CLI\u7528\u6237\u6307\u5357\u4e2d\u7684 CLI\u662f\u4ec0\u4e48 \u3002 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u3002 aws cloudformation delete-stack --stack-name <installation-stack-name> --region <aws-region>","title":"\u5378\u8f7d\u89e3\u51b3\u65b9\u6848"},{"location":"uninstall/#_1","text":"\u767b\u5f55 Amazon CloudFormation \u63a7\u5236\u53f0\u3002 \u9009\u62e9\u6b64\u89e3\u51b3\u65b9\u6848\u7684\u5b89\u88c5\u5806\u6808\u3002 \u70b9\u51fb \u5220\u9664 \u6309\u94ae\u3002","title":"\u4f7f\u7528\u4e9a\u9a6c\u900a\u4e91\u79d1\u6280\u7ba1\u7406\u63a7\u5236\u53f0\u5220\u9664\u5806\u6808"},{"location":"uninstall/#cli","text":"\u786e\u5b9a\u547d\u4ee4\u884c\u5728\u60a8\u7684\u73af\u5883\u4e2d\u662f\u5426\u53ef\u7528\u3002\u6709\u5173\u5b89\u88c5\u8bf4\u660e\uff0c\u8bf7\u53c2\u9605CLI\u7528\u6237\u6307\u5357\u4e2d\u7684 CLI\u662f\u4ec0\u4e48 \u3002 \u8fd0\u884c\u5982\u4e0b\u547d\u4ee4\u3002 aws cloudformation delete-stack --stack-name <installation-stack-name> --region <aws-region>","title":"\u4f7f\u7528CLI\u5220\u9664\u5806\u6808"}]}