<!doctype html><html lang=cn class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.79.1"><meta name=description content><link rel="shortcut icon" href=https://awslabs.github.io/aws-cloudfront-extensions/images/favicon.ico type=image/x-icon><title>CloudFront Extensions workshop :: CloudFront Extensions</title><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/nucleus.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/fontawesome-all.min.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/hybrid.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/featherlight.min.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/perfect-scrollbar.min.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/auto-complete.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/atom-one-dark-reasonable.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/theme.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/hugo-theme.css?1632295969 rel=stylesheet><link href=https://awslabs.github.io/aws-cloudfront-extensions/css/theme-cloudfrontext.css?1632295969 rel=stylesheet><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/jquery-3.3.1.min.js?1632295969></script><style>:root #header+#content>#left>#rlblock_left{display:none!important}</style></head><body data-url=https://awslabs.github.io/aws-cloudfront-extensions/cn/><nav id=sidebar><div id=header-wrapper><div id=header><a id=logo href=https://awslabs.github.io/aws-cloudfront-extensions/><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/logo.png alt="AWS Logo" width=44% height=44%></a></div><div class=searchbox><label for=search-by><i class="fas fa-search"></i></label><input data-search-input id=search-by type=search placeholder=Search...>
<span data-search-clear><i class="fas fa-times"></i></span></div><script type=text/javascript src=https://awslabs.github.io/aws-cloudfront-extensions/js/lunr.min.js?1632295969></script><script type=text/javascript src=https://awslabs.github.io/aws-cloudfront-extensions/js/auto-complete.js?1632295969></script><script type=text/javascript>var baseurl="https:\/\/awslabs.github.io\/aws-cloudfront-extensions\/\/cn";</script><script type=text/javascript src=https://awslabs.github.io/aws-cloudfront-extensions/js/search.js?1632295969></script></div><div class=highlightable><ul class=topics><li data-nav-id=/cn/prerequisite/ title=开始前的准备 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/prerequisite/>开始前的准备</a><ul><li data-nav-id=/cn/prerequisite/aws-cloudshell/readme/ title="AWS CloudShell" class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/prerequisite/aws-cloudshell/readme/>AWS CloudShell</a></li><li data-nav-id=/cn/prerequisite/aws-cdk/readme/ title="AWS CDK" class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/prerequisite/aws-cdk/readme/>AWS CDK</a></li><li data-nav-id=/cn/prerequisite/aws-config/readme/ title=配置证书 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/prerequisite/aws-config/readme/>配置证书</a></li></ul></li><li data-nav-id=/cn/deploy/ title="部署CloudFront Extensions" class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/deploy/>部署CloudFront Extensions</a><ul><li data-nav-id=/cn/deploy/deploy-auth/readme/ title=部署Lambda@Edge实现Cognito鉴权 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/deploy/deploy-auth/readme/>部署Lambda@Edge实现Cognito鉴权</a></li><li data-nav-id=/cn/deploy/deploy-device/readme/ title=部署Lambda@Edge实现根据设备类型返回相应内容 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/deploy/deploy-device/readme/>部署Lambda@Edge实现根据设备类型返回相应内容</a></li></ul></li><li data-nav-id=/cn/contribution/ title=贡献 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/contribution/>贡献</a><ul><li data-nav-id=/cn/contribution/pr/readme/ title=通过拉取请求贡献代码 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/contribution/pr/readme/>通过拉取请求贡献代码</a></li><li data-nav-id=/cn/contribution/bug-report/readme/ title=报告issues class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/contribution/bug-report/readme/>报告issues</a></li></ul></li><li data-nav-id=/cn/reference/ title=参考资料 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/reference/>参考资料</a></li><li data-nav-id=/cn/cleanup/ title=清理 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/cleanup/>清理</a><ul><li data-nav-id=/cn/cleanup/s3-bucket/readme/ title=S3桶 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/cleanup/s3-bucket/readme/>S3桶</a></li><li data-nav-id=/cn/cleanup/cognito-user-pool/readme/ title=Cognito用户池 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/cleanup/cognito-user-pool/readme/>Cognito用户池</a></li><li data-nav-id=/cn/cleanup/cf-distribution/readme/ title=CloudFront分配 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/cleanup/cf-distribution/readme/>CloudFront分配</a></li><li data-nav-id=/cn/cleanup/cloudformation/readme/ title=CloudFormation class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/cleanup/cloudformation/readme/>CloudFormation</a></li><li data-nav-id=/cn/cleanup/cloudshell/readme/ title=CloudShell class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/cleanup/cloudshell/readme/>CloudShell</a></li></ul></li><li data-nav-id=/cn/edge_day/ title="Edge Day" class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/edge_day/>Edge Day</a><ul><li data-nav-id=/cn/edge_day/lab01/readme/ title=构建CloudFront加速的网站 class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/edge_day/lab01/readme/>构建CloudFront加速的网站</a></li><li data-nav-id=/cn/edge_day/lab03/readme/ title="WAF 动手实验" class=dd-item><a href=https://awslabs.github.io/aws-cloudfront-extensions/cn/edge_day/lab03/readme/>WAF 动手实验</a></li></ul></li></ul><section id=prefooter><hr><ul><li><a class=padding><i class="fas fa-language fa-fw"></i><div class=select-style><select id=select-language onchange="location=this.value;">
<option id=en value=https://awslabs.github.io/aws-cloudfront-extensions/>English</option>
<option id=cn value=https://awslabs.github.io/aws-cloudfront-extensions/cn/ selected>Chinese</option></select><svg id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="255" height="255" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255"><g><g id="arrow-drop-down"><polygon points="0,63.75 127.5,191.25 255,63.75"/></g></g></svg></div></a></li></ul></section><section id=footer><left><a class=github-button href=https://github.com/awslabs/aws-cloudfront-extensions data-icon=octicon-cloud-download aria-label="Repo of awslabs/aws-cloudfront-extension on GitHub">Repo</a>
<a class=github-button href=https://github.com/awslabs/aws-cloudfront-extensions data-icon=octicon-star data-show-count=false aria-label="Star awslabs/aws-cloudfront-extension on GitHub">Star</a>
<a class=github-button href=https://github.com/awslabs/aws-cloudfront-extensions/fork data-icon=octicon-repo-forked data-show-count=false aria-label="Fork awslabs/aws-cloudfront-extension on GitHub">Fork</a><p><a href="https://aws.amazon.com/privacy/?nc1=f_pr">Privacy</a> | <a href="https://aws.amazon.com/terms/?nc1=f_pr">Site Terms</a> | © 2021, Amazon Web Services, Inc. or its affiliates. All rights reserved</p></left><script async defer src=https://buttons.github.io/buttons.js></script></section></div></nav><section id=body><div id=overlay></div><div class="padding highlightable"><div id=head-tags></div><div id=chapter><div id=body-inner><span id=sidebar-toggle-span><a href=# id=sidebar-toggle data-sidebar-toggle><i class="fas fa-bars"></i>navigation</a></span><h1 id=amazon-cloudfront-extensions>Amazon CloudFront Extensions</h1><p>Amazon CloudFront Extensions包含覆盖常用用户场景的Lambda@Edge、CloudFront Functions、CDK模版和监控工具，方便用户一站式获取CloudFront拓展功能。本方案部署操作简单，用户可点击下方表格中的Deploy按钮进行部署。</p><p><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/what-is-cloudfrontext.png alt="What is CloudFrontExt"></p><p>CloudFront Extensions包含三个部分</p><ul><li>覆盖如下用户场景的Lambda@Edge和CloudFront Function，例如鉴权、预热、根据设备类型跳转、图片缩放</li><li>CDK模块，例如WAF&Shield自动部署模版，用户通过部署此模版可为CloudFront实现DDos、爬虫、XSS、SQL注入等的防御功能</li><li>监控工具（开发中），通过将CloudFront访问日志或实时日志加载到Amazon Elasticsearch Service，从而在Kibana中展示相应指标，如城市维度的流量使用情况</li></ul><h4 id=lambdaedge>Lambda@Edge</h4><table><thead><tr><th><strong>Name</strong></th><th><strong>Description</strong></th><th><strong>Deployment Type</strong></th><th><strong>Deploy</strong></th></tr></thead><tbody><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/authentication-with-cognito>Authentication by Cognito</a></td><td>Cognito是亚马逊的鉴权服务，当用户通过Cognito进行鉴权时，本Lambda可验证Cognito返回的token是否合法(<a href=./deploy/deploy-auth/readme>Workshop</a>)</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/authentication-with-cognito>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/authentication-with-cognito><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/blob/main/edge/nodejs/add-security-headers>Adding security header</a></td><td>在响应中增加安全标头，例如通过添加HSTS&rsquo;strict-transport-security&rsquo;强制浏览器使用HTTPS，添加&rsquo;x-frame-options&rsquo;预防点击劫持</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/add-security-headers>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/add-security-headers><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/serving-based-on-device>Serving Content Based on Device Type</a></td><td>根据设备类型跳转到相应链接 (<a href=./deploy/deploy-device/readme>Workshop</a>)</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/serving-based-on-device>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/serving-based-on-device><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/cross-origin-resource-sharing>Cross Origin Resource Sharing</a></td><td>在响应中添加CORS(Cross Origin Resource Sharing)标头，例如&rsquo;access-control-allow-origin'、&lsquo;access-control-allow-headers&rsquo;</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/cross-origin-resource-sharing>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/cross-origin-resource-sharing><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/modify-response-status-code>Modify response status code</a></td><td>修改响应的状态码，例如将状态码从500修改为200</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/modify-response-status-code>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/modify-response-status-code><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/modify-response-header>Modify response header</a></td><td>修改响应的标头</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/modify-response-header>SAR</a>, SAM, <a href=https://github.com/pahud/cdk-cloudfront-plus/tree/main/src/demo/modify-response-header>CDK</a></td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/modify-response-header><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/access-origin-by-weight-rate>Access origin by weight rate</a></td><td>根据提供的权重访问援站服务器，例如有两个源站服务器，权重分别是1和2，则会按照此权重比例进行回源</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/access-origin-by-weight-rate>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/access-origin-by-weight-rate><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/multiple-origin-IP-retry>Failover to alternative origin</a></td><td>用户可提供一个源站服务器列表，当列表中的第一个源站服务器不可用时，自动切换到下一个，直到找到可用源站并发起请求</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/multiple-origin-IP-retry>SAR</a>, SAM, <a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/multiple-origin-IP-retry>CDK</a></td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/multiple-origin-IP-retry><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/http302-from-origin>Support 302 from origin</a></td><td>当收到302状态码时，直接请求相应的源站，而不需要返回给客户端进行302跳转</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/http302-from-origin>SAR</a>, SAM, <a href=https://github.com/pahud/cdk-cloudfront-plus/issues/12>CDK</a></td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/http302-from-origin><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/python/prewarm>Pre-warm</a></td><td>用户可指定区域进行预热，例如将100个url在美国东部进行预热</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/prewarm>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/prewarm><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/resize-picture>Resize picture</a></td><td>根据提供的宽和高缩放图片，并将缩放后的图片保存到S3，提高下次相同请求的效率</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/resize-picture>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/resize-picture><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/anti-hotlinking>Anti-hotlinking</a></td><td>只允许referer白名单中的请求访问资源，从而达到防盗链的目的。目前白名单支持'*'、'?&lsquo;等通配符。例如只允许referer是www.example.com的请求访问网站的图片</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/anti-hotlinking>SAR</a>, SAM, <a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/anti-hotlinking>CDK</a></td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/anti-hotlinking><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/normalize-query-string>Standardize query string</a></td><td>标准化query string从而CHR(提高缓存命中率)，此Lambda会将query string转为小写字母并按照升序排列。例如原url是www.example.com/index.html?B=1&a=2，标准化后会变为www.example.com/index.html?a=2&b=1，详情可参考<a href=https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/cache-hit-ratio.html#cache-hit-ratio-query-string-parameters>链接</a></td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/normalize-query-string>SAR</a>, SAM, <a href=https://github.com/pahud/cdk-cloudfront-plus/pull/64>CDK</a></td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/normalize-query-string><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/pahud/cdk-cloudfront-plus/issues/17>OAuth2 Authentication</a></td><td>通过OAuth2进行鉴权</td><td><a href=https://www.npmjs.com/package/cdk-cloudfront-plus>CDK</a></td><td>-</td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/authentication-with-aliyun-cdn-typeA>Authentication with AliYun</a></td><td>由Goclouds提供，实现基于阿里云的鉴权</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/authentication-with-aliyun-cdn-typeA>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/authentication-with-aliyun-cdn-typeA><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/pahud/cdk-cloudfront-plus/issues/9>Default Directory Index for Amazon S3 Origin</a></td><td>为CloudFront的链接增加默认的结尾，例如为所有以&rsquo;/&lsquo;结尾的url增加example.html<a href=https://aws.amazon.com/tw/blogs/compute/implementing-default-directory-indexes-in-amazon-s3-backed-amazon-cloudfront-origins-using-lambdaedge/>Use case</a></td><td><a href=https://www.npmjs.com/package/cdk-cloudfront-plus>CDK</a></td><td>-</td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/rewrite-url>Rewrite host for Custom Origin</a></td><td>当CloudFront的源站是自定义源站时，此Lambda可以重写请求中的host字段，从而实现重定向到其他源站的功能</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/rewrite-url>SAR</a></td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/rewrite-url><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/pahud/cdk-cloudfront-plus/issues/11>Redirect URL by Geolocation</a></td><td>根据地理位置，请求相应的源站服务器，此Lambda会返回302到客户端，然后由客户端再次发起请求。详情请参考<a href=https://aws.amazon.com/tw/blogs/networking-and-content-delivery/dynamically-route-viewer-requests-to-any-origin-using-lambdaedge/>链接</a></td><td><a href=https://www.npmjs.com/package/cdk-cloudfront-plus>CDK</a></td><td>-</td></tr><tr><td><a href=https://github.com/pahud/cdk-cloudfront-plus/issues/23>Convert query string</a></td><td>将query string中的字段添加到header中，可用于将长url转成短url</td><td><a href=https://www.npmjs.com/package/cdk-cloudfront-plus>CDK</a></td><td>-</td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/python/serverless-load-balancer>Serverless load balancer</a></td><td>通过Lambda@Edge实现负载均衡功能，负载会在Dynamodb表格中记录</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/serverless-load-balancer>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/serverless-load-balancer><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/pahud/cdk-cloudfront-plus/issues/41>Access origin by geolocation</a></td><td>根据地理位置，直接请求相应的源站服务器，不需要返回客户端进行302跳转</td><td><a href=https://www.npmjs.com/package/cdk-cloudfront-plus>CDK</a></td><td>-</td></tr><tr><td><a href=https://github.com/pahud/cdk-cloudfront-plus/pull/46>Custom Error Page</a></td><td>自定义错误页面和响应状态码<a href=https://aws.amazon.com/blogs/networking-and-content-delivery/customize-403-error-pages-from-amazon-cloudfront-origin-with-lambdaedge/>Use case</a></td><td><a href=https://www.npmjs.com/package/cdk-cloudfront-plus>CDK</a></td><td>-</td></tr><tr><td><a href=https://github.com/pahud/cdk-cloudfront-plus/issues/14>Global Data Ingestion</a></td><td>将日志输出到Amazon Kinesis Firehose<a href=https://aws.amazon.com/tw/blogs/networking-and-content-delivery/global-data-ingestion-with-amazon-cloudfront-and-lambdaedge/>Use case</a></td><td><a href=https://www.npmjs.com/package/cdk-cloudfront-plus>CDK</a></td><td>-</td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/edge/nodejs/custom-response-with-replaced-url>Custom Response with New URL</a></td><td>将响应中的body内容替换为自定义内容。例如响应返回的是个html，此Lambda可以将html中的所有&rsquo;<a href=http://www.original.com>www.original.com</a>&rsquo;内容替换&rsquo;<a href=http://www.new.com>www.new.com</a>&rsquo;，用户可通过此Lambda实现只维护一个S3桶，即可让两个不同的域名进行访问</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/custom-response-with-replaced-url>SAR</a>, SAM</td><td><a href=https://serverlessrepo.aws.amazon.com/applications/us-east-1/418289889111/custom-response-with-replaced-url><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr></tbody></table><h4 id=cloudfront-function>CloudFront Function</h4><table><thead><tr><th><strong>Name</strong></th><th><strong>Description</strong></th><th><strong>Deploy</strong></th></tr></thead><tbody><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-security-headers>Add Security Headers</a></td><td>在响应中增加安全标头，例如通过添加HSTS&rsquo;strict-transport-security&rsquo;强制浏览器使用HTTPS，添加&rsquo;x-frame-options&rsquo;预防点击劫持</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=add-security-headers&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fadd-security-headers.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/cross-origin-resource-sharing>Cross Origin Resource Sharing</a></td><td>在响应中添加CORS(Cross Origin Resource Sharing)标头，例如&rsquo;access-control-allow-origin'、&lsquo;access-control-allow-headers&rsquo;</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=cross-origin-resource-sharing&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fcross-origin-resource-sharing.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-cache-control-header>Add Cache Control Headers</a></td><td>添加Cache-Control标头，从而允许浏览器本地缓存</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=add-cache-control-header&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fadd-cache-control-header.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-origin-header>Add Origin Headers</a></td><td>添加Origin标头</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=add-origin-header&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fadd-origin-header.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/add-true-client-ip-header>Add True Client IP Headers</a></td><td>添加True-Client-IP标头，此标头是真正最终连接CloudFront的客户端的IP。如果没有此标头，由CloudFront到源站服务器的连接（即源请求Origin request）只会包含CloudFront服务器的IP地址，而不是用户的客户端的IP地址</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=add-true-client-ip-header&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fadd-true-client-ip-header.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/redirect-based-on-country>Redirect Based on Country</a></td><td>根据用户所在地区返回相应的内容</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=redirect-based-on-country&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fredirect-based-on-country.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/default-dir-index>Default Dir Index</a></td><td>为CloudFront的链接增加默认的结尾，例如为所有以'/&lsquo;结尾的url增加index.html</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=default-dir-index&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fdefault-dir-index.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/verify-jwt>Verify Json Web Token</a></td><td>验证query string中的JSON Web Token (JWT)，一般用于鉴权场景</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=verify-jwt&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fverify-jwt.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr><tr><td><a href=https://github.com/awslabs/aws-cloudfront-extensions/tree/main/function/js/custom-host>Customize Request Host</a></td><td>将host替换为自定义的标头的内容，例如用户可自定义一个标头awscustomhost，最终host会被替换为此标头的内容</td><td><a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=custom-host&templateURL=https:%2F%2Faws-cloudfront-extensions-cff.s3.amazonaws.com%2Fcustom-host.yaml"><img src=https://awslabs.github.io/aws-cloudfront-extensions/images/deploy_button.png alt=部署></a></td></tr></tbody></table></div></div></div><div id=navigation><a class="nav nav-next" href=https://awslabs.github.io/aws-cloudfront-extensions/cn/prerequisite/ title=开始前的准备 style=margin-right:0><i class="fa fa-chevron-right"></i></a></div></section><div style=left:-1000px;overflow:scroll;position:absolute;top:-1000px;border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px><div style=border:none;box-sizing:content-box;height:200px;margin:0;padding:0;width:200px></div></div><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/clipboard.min.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/perfect-scrollbar.min.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/perfect-scrollbar.jquery.min.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/jquery.sticky.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/featherlight.min.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/highlight.pack.js?1632295969></script><script>hljs.initHighlightingOnLoad();</script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/modernizr.custom-3.6.0.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/learn.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/js/hugo-learn.js?1632295969></script><script src=https://awslabs.github.io/aws-cloudfront-extensions/mermaid/mermaid.js?1632295969></script><script>mermaid.initialize({startOnLoad:true});</script></body></html>